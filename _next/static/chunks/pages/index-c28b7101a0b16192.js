(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(60036)}])},60036:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return a2}});var r=t(85893),s=t(67294),l=t(1604),n=t(56312),i=t(87536),o=t(28728),d=t(96164),c=t(85451),m=t(8887),u=t(64162),p=t(39784),x=t(37888),f=t(16045),h=t(42932),g=t(69508),b=t(10524),j=t(71371),v=t(61551),y=t(29302),N=t(52688);let w=e=>{if(e instanceof Date&&(0,u.J)(e))return e;if("string"==typeof e){let a=(0,p.D)(e);if((0,u.J)(a))return a}if("number"==typeof e){let a=new Date(e);if((0,u.J)(a))return a}return null},k=(e,a)=>{let t,r;let s=new Date;switch(a){case"week":t=(0,x.z)(s,{weekStartsOn:1}),r=(0,f.v)(s,{weekStartsOn:1});break;case"month":t=(0,h.N)(s),r=(0,g.V)(s);break;case"bi-weekly":let l=(0,h.N)(s),n=(0,g.V)(s),i=(0,b.i)(new Date(s.getFullYear(),s.getMonth(),15));s<=i?(t=(0,j.b)(l),r=i):(t=(0,j.b)(new Date(s.getFullYear(),s.getMonth(),16)),r=(0,b.i)(n));break;default:return[]}return t=(0,j.b)(t),r=(0,b.i)(r),e.filter(e=>{let a=w(e.timestamp);return a&&(0,v._)(a,{start:t,end:r})})},C=e=>e.reduce((e,a)=>e+(a.price||0),0),S=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}),z=e=>((null==e||isNaN(e))&&(e=0),S.format(e)),_=e=>{if(null==e)return 0;let a=parseInt(String(e).replace(/[^\d]/g,""),10);return isNaN(a)?0:a},E=e=>{let a=w(e);if(!a)return"Fecha inv\xe1lida";let t=N.es;try{return(0,y.WU)(a,"PPpp",{locale:t})}catch(t){return console.error("Error formatting date:",t,"Input:",e,"Parsed:",a),a.toLocaleDateString("es-ES")+" "+a.toLocaleTimeString("es-ES")}},R=()=>l.Ry({product:l.Z_().min(1,{message:"El nombre del producto no puede estar vac\xedo."}),price:l.oQ.number().positive({message:"El precio debe ser un n\xfamero positivo."}),category:l.Z_().optional()});function T(e){let{onAddExpense:a,categories:t,defaultCategoryKey:l,productInputRef:u}=e,{toast:p}=(0,m.pm)(),[x,f]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),b=(0,s.useMemo)(()=>R(),[]),j=(0,i.cI)({resolver:(0,n.F)(b),defaultValues:{product:"",price:0,category:""}}),v=j.watch("price");(0,s.useEffect)(()=>{"number"!=typeof v||isNaN(v)?g(z(0)):g(z(v))},[v]);let y=(e,a)=>{let t=_(e.target.value);g(z(isNaN(t)?0:t)),a(isNaN(t)?0:t)},N=(e,a)=>{g(z(isNaN(a)?0:a)),e()};async function w(e){f(!0);try{var t,r;let s=(null===(t=e.category)||void 0===t?void 0:t.trim())||l;await new Promise(e=>setTimeout(e,100)),a({product:{name:e.product,color:"",value:0},price:e.price,category:s}),p({title:"Gasto agregado",description:"Producto: ".concat(e.product,", Precio: ").concat(z(e.price),", Categor\xeda: ").concat(s)}),j.reset({product:"",price:0,category:""}),g(z(0)),null===(r=u.current)||void 0===r||r.focus()}catch(e){console.error("Error al agregar gasto:",e),p({title:"Error",description:"No se pudo agregar el gasto.",variant:"destructive"})}finally{f(!1)}}return(0,r.jsx)(d.l0,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(w),className:"space-y-3 sm:space-y-4 rounded-lg border bg-card p-4 sm:p-6 shadow-sm",children:[(0,r.jsx)(d.Wi,{control:j.control,name:"product",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Producto"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"Ej: Caf\xe9",...a,ref:u})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:j.control,name:"price",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Precio (COP)"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{type:"text",placeholder:z(0),...a,value:h,onChange:e=>y(e,a.onChange),onBlur:()=>N(a.onBlur,a.value),inputMode:"decimal"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:j.control,name:"category",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Categor\xeda (Opcional)"}),(0,r.jsx)(d.NI,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.I,{placeholder:"Ej: Comida",...a,list:"category-suggestions",autoComplete:"off"}),(0,r.jsx)("datalist",{id:"category-suggestions",children:t.map(e=>(0,r.jsx)("option",{value:e},e))})]})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(o.z,{type:"submit",disabled:x,className:"w-full sm:w-auto",children:x?"Agregando...":"Agregar Gasto"})]})})}var P=t(47903),D=t(31702),F=t(53776);let I=D.fC,Z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(D.aV,{ref:a,className:(0,F.cn)("inline-flex h-auto min-h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});Z.displayName=D.aV.displayName;let O=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(D.xz,{ref:a,className:(0,F.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});O.displayName=D.xz.displayName;let M=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(D.VY,{ref:a,className:(0,F.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});function G(e){let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,F.cn)("animate-pulse rounded-md bg-muted",a),...t})}function V(e){let{expenses:a}=e,[t,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[u,p]=(0,s.useState)(0),[x,f]=(0,s.useState)(0),[h,g]=(0,s.useState)(0);(0,s.useEffect)(()=>{l(!0);let e=k(a,"week"),t=k(a,"bi-weekly"),r=k(a,"month");i(C(e)),d(C(t)),m(C(r)),p(e.length),f(t.length),g(r.length)},[a]);let b=e=>{let a,s,l,i;switch(e){case"week":a=n,s=u,l="Total Gastado esta Semana",i="semana";break;case"bi-weekly":a=o,s=x,l="Total Gastado esta Quincena",i="quincena";break;case"month":a=c,s=h,l="Total Gastado este Mes",i="mes"}return t&&null!==a?(0,r.jsxs)("div",{className:"mt-4 p-3 sm:p-4 rounded-md border bg-card",children:[" ",(0,r.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:l})," ",(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:z(a)})," ",(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[s," gasto(s) esta ",i,"."]})," "]}):(0,r.jsxs)("div",{className:"mt-4 p-3 sm:p-4 rounded-md border bg-card space-y-2",children:[" ",(0,r.jsx)(G,{className:"h-5 sm:h-6 w-3/4"}),(0,r.jsx)(G,{className:"h-7 sm:h-8 w-1/2"}),(0,r.jsx)(G,{className:"h-4 w-1/4"})]})};return(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{className:"px-4 py-3 sm:px-6 sm:py-4",children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:t?"Resumen de Gastos":(0,r.jsx)(G,{className:"h-6 w-1/2"})})}),(0,r.jsx)(P.aY,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:(0,r.jsxs)(I,{defaultValue:"week",className:"w-full",children:[(0,r.jsxs)(Z,{className:"grid w-full grid-cols-3 h-auto text-xs sm:text-sm",children:[" ",t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{value:"week",className:"py-1.5 sm:py-2",children:"Semana"})," ",(0,r.jsx)(O,{value:"bi-weekly",className:"py-1.5 sm:py-2",children:"Quincena"})," ",(0,r.jsx)(O,{value:"month",className:"py-1.5 sm:py-2",children:"Mes"})," "]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{className:"h-9 w-full"}),(0,r.jsx)(G,{className:"h-9 w-full"}),(0,r.jsx)(G,{className:"h-9 w-full"})]})]}),(0,r.jsx)(M,{value:"week",children:b("week")}),(0,r.jsx)(M,{value:"bi-weekly",children:b("bi-weekly")}),(0,r.jsx)(M,{value:"month",children:b("month")})]})})]})}M.displayName=D.VY.displayName;let A=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{ref:a,className:(0,F.cn)("w-full caption-bottom text-sm",t),...s})})});A.displayName="Table";let L=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:a,className:(0,F.cn)("[&_tr]:border-b",t),...s})});L.displayName="TableHeader";let Y=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,F.cn)("[&_tr:last-child]:border-0",t),...s})});Y.displayName="TableBody",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,F.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let W=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:a,className:(0,F.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});W.displayName="TableRow";let K=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:a,className:(0,F.cn)("h-10 sm:h-12 px-2 sm:px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 whitespace-nowrap",t),...s})});K.displayName="TableHead";let B=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:a,className:(0,F.cn)("p-2 sm:p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});B.displayName="TableCell",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:a,className:(0,F.cn)("mt-4 text-xs sm:text-sm text-muted-foreground px-2 sm:px-4",t),...s})}).displayName="TableCaption";var H=t(73260),J=t(50186),U=t(89532);let X=U.fC,q=U.xz,Q=U.h_,$=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(U.aV,{className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});$.displayName=U.aV.displayName;let ee=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(Q,{children:[(0,r.jsx)($,{}),(0,r.jsx)(U.VY,{ref:a,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});ee.displayName=U.VY.displayName;let ea=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};ea.displayName="AlertDialogHeader";let et=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};et.displayName="AlertDialogFooter";let er=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(U.Dx,{ref:a,className:(0,F.cn)("text-lg font-semibold",t),...s})});er.displayName=U.Dx.displayName;let es=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(U.dk,{ref:a,className:(0,F.cn)("text-sm text-muted-foreground",t),...s})});es.displayName=U.dk.displayName;let el=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(U.aU,{ref:a,className:(0,F.cn)((0,o.d)(),t),...s})});el.displayName=U.aU.displayName;let en=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(U.$j,{ref:a,className:(0,F.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});en.displayName=U.$j.displayName;var ei=t(12003);let eo=(0,ei.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ed(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,F.cn)(eo({variant:t}),a),...s})}function ec(e){let{expenses:a,onDeleteExpense:t,onEditExpense:s,groupName:l,groupDisplayName:n,onDeleteGroup:i,groupTypeLabel:d,defaultCategoryKey:c}=e,{toast:u}=(0,m.pm)(),p="product"===d?"Producto":"category"===d?"Categor\xeda":"Grupo",x=e=>{t(e),u({title:"Gasto eliminado",description:"El gasto ha sido eliminado exitosamente."})},f=e=>{i&&e&&i(e)};if(!a||0===a.length)return(0,r.jsx)("div",{className:"text-muted-foreground text-center p-4",children:"No hay gastos para mostrar con los filtros seleccionados."});let h=!!i&&!!l&&!!d;return(0,r.jsxs)(r.Fragment,{children:[h&&l&&(0,r.jsx)("div",{className:"mb-4 text-right",children:(0,r.jsxs)(X,{children:[(0,r.jsx)(q,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"destructive",size:"sm",className:"w-full sm:w-auto",disabled:"category"===d&&l===c,children:[(0,r.jsx)(H.Z,{className:"mr-2 h-4 w-4"})," Eliminar ",p," (",n||l,")"]})}),(0,r.jsxs)(ee,{children:[(0,r.jsxs)(ea,{children:[(0,r.jsx)(er,{children:"\xbfEst\xe1s seguro?"}),(0,r.jsxs)(es,{children:["Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente todas las entradas para ",p.toLowerCase(),' "',n||l,'".',"category"===d&&l!==c&&" La categor\xeda tambi\xe9n ser\xe1 eliminada de la lista de sugerencias."]})]}),(0,r.jsxs)(et,{children:[(0,r.jsx)(en,{children:"Cancelar"}),(0,r.jsxs)(el,{onClick:()=>f(l),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Eliminar ",p]})]})]})]})}),(0,r.jsxs)(A,{children:[(0,r.jsx)(L,{children:(0,r.jsxs)(W,{children:[(0,r.jsx)(K,{className:"px-2 py-2 sm:px-4",children:"Producto"}),(0,r.jsx)(K,{className:"px-2 py-2 sm:px-4",children:"Precio"}),(0,r.jsx)(K,{className:"hidden md:table-cell px-2 py-2 sm:px-4",children:"Categor\xeda"}),(0,r.jsx)(K,{className:"hidden lg:table-cell px-2 py-2 sm:px-4",children:"Fecha y Hora"}),(0,r.jsx)(K,{className:"text-right px-2 py-2 sm:px-4",children:"Acciones"})]})}),(0,r.jsx)(Y,{children:a.sort((e,a)=>{var t,r,s,l;let n=null!==(s=null===(t=w(e.timestamp))||void 0===t?void 0:t.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(a.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n}).map(e=>(0,r.jsxs)(W,{children:[(0,r.jsx)(B,{className:"font-medium px-2 py-2 sm:px-4 truncate max-w-[100px] sm:max-w-xs",children:e.product.name}),(0,r.jsx)(B,{className:"px-2 py-2 sm:px-4 whitespace-nowrap",children:z(e.price)}),(0,r.jsx)(B,{className:"hidden md:table-cell px-2 py-2 sm:px-4",children:(0,r.jsx)(ed,{variant:e.category===c?"secondary":"outline",className:"text-xs",children:e.category||c})}),(0,r.jsx)(B,{className:"hidden lg:table-cell px-2 py-2 sm:px-4 whitespace-nowrap",children:E(e.timestamp)}),(0,r.jsxs)(B,{className:"text-right px-2 py-2 sm:px-4",children:[(0,r.jsxs)(o.z,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"mr-1",children:[(0,r.jsx)(J.Z,{className:"h-4 w-4 text-blue-500"}),(0,r.jsx)("span",{className:"sr-only",children:"Editar"})]}),(0,r.jsxs)(X,{children:[(0,r.jsx)(q,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"ghost",size:"icon",children:[(0,r.jsx)(H.Z,{className:"h-4 w-4 text-destructive"}),(0,r.jsx)("span",{className:"sr-only",children:"Eliminar"})]})}),(0,r.jsxs)(ee,{children:[(0,r.jsxs)(ea,{children:[(0,r.jsx)(er,{children:"\xbfEst\xe1s seguro?"}),(0,r.jsxs)(es,{children:['Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente el gasto "',e.product.name,'" con precio ',z(e.price),"."]})]}),(0,r.jsxs)(et,{children:[(0,r.jsx)(en,{children:"Cancelar"}),(0,r.jsx)(el,{onClick:()=>x(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar Gasto"})]})]})]})]})]},e.id))})]})]})}var em=t(45450),eu=t(23435),ep=t(3112),ex=t(24961),ef=t(45218),eh=t(11029),eg=t(11345),eb=t(45032),ej=t(55623),ev=t(53878);let ey={light:"",dark:".dark"},eN=s.createContext(null);function ew(){let e=s.useContext(eN);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let ek=s.forwardRef((e,a)=>{let{id:t,className:l,children:n,config:i,...o}=e,d=s.useId(),c="chart-".concat(t||d.replace(/:/g,""));return(0,r.jsx)(eN.Provider,{value:{config:i},children:(0,r.jsxs)("div",{"data-chart":c,ref:a,className:(0,F.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,r.jsx)(eC,{id:c,config:i}),n]})})});ek.displayName="Chart";let eC=e=>{let{id:a,config:t}=e,s=Object.entries(t).filter(e=>{let[,a]=e;return a.theme||a.color});return s.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(ey).map(e=>{let[t,r]=e;return"\n".concat(r," [data-chart=").concat(a,"] {\n").concat(s.map(e=>{var a;let[r,s]=e,l=(null===(a=s.theme)||void 0===a?void 0:a[t])||s.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};function eS(e,a,t){if("object"!=typeof a||null===a)return;let r="payload"in a&&"object"==typeof a.payload&&null!==a.payload?a.payload:void 0,s=t;return t in a&&"string"==typeof a[t]?s=a[t]:r&&t in r&&"string"==typeof r[t]&&(s=r[t]),s in e?e[s]:e[t]}eh.u,s.forwardRef((e,a)=>{let{active:t,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:c,labelFormatter:m,labelClassName:u,formatter:p,color:x,nameKey:f,labelKey:h}=e,{config:g}=ew(),b=s.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[a]=l,t="".concat(h||a.dataKey||a.name||"value"),s=eS(g,a,t),n=h||"string"!=typeof c?null==s?void 0:s.label:(null===(e=g[c])||void 0===e?void 0:e.label)||c;return m?(0,r.jsx)("div",{className:(0,F.cn)("font-medium",u),children:m(n,l)}):n?(0,r.jsx)("div",{className:(0,F.cn)("font-medium",u),children:n}):null},[c,m,l,o,u,g,h]);if(!t||!(null==l?void 0:l.length))return null;let j=1===l.length&&"dot"!==i;return(0,r.jsxs)("div",{ref:a,className:(0,F.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,r.jsx)("div",{className:"grid gap-1.5",children:l.map((e,a)=>{let t="".concat(f||e.name||e.dataKey||"value"),s=eS(g,e,t),l=x||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,F.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,a,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.icon)?(0,r.jsx)(s.icon,{}):!d&&(0,r.jsx)("div",{className:(0,F.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":j&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,F.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}).displayName="ChartTooltip",ev.D,s.forwardRef((e,a)=>{let{className:t,hideIcon:s=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=ew();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:a,className:(0,F.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",t),children:l.map(e=>{let a="".concat(i||e.dataKey||"value"),t=eS(o,e,a);return(0,r.jsxs)("div",{className:(0,F.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!s?(0,r.jsx)(t.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null}).displayName="ChartLegend";let ez=(e,a,t)=>{let r={},s=new Map,l=(0,j.b)(a),n=(0,j.b)(t);if(l>n)return{data:[],productKeysMap:{},chartConfig:{}};(0,ej.D)({start:l,end:n}).forEach(e=>{let a=(0,y.WU)(e,"dd MMM",{locale:N.es});s.set((0,y.WU)(e,"yyyy-MM-dd"),{date:a,_rawDate:e,total:0})}),e.forEach(e=>{let a=w(e.timestamp);if(!a)return;let t=(0,j.b)(a),l=(0,y.WU)(t,"yyyy-MM-dd"),n=s.get(l);if(n){let a=e.product.name;r[a]||(r[a]=e.product.name),n.total+=e.price,n[a]=(n[a]||0)+e.price}});let i=Array.from(s.values()).sort((e,a)=>e._rawDate.getTime()-a._rawDate.getTime()).map(e=>{let a={...e};return Object.keys(r).forEach(e=>{e in a||(a[e]=0)}),a}),o={total:{label:"Total",color:"hsl(var(--chart-1))"}};return Object.keys(r).forEach((e,a)=>{let t=360/(Object.keys(r).length+2)*a%360;o[e]={label:r[e],color:"hsl(".concat(t,", ").concat(Math.floor(21*Math.random())+70,"%, ").concat(Math.floor(21*Math.random())+55,"%)")}}),{data:i,productKeysMap:r,chartConfig:o}};function e_(e){let{expenses:a,startDate:t,endDate:l}=e,[n,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i(!0)},[]);let{data:o,productKeysMap:d,chartConfig:c}=(0,s.useMemo)(()=>n?ez(a,t,l):{data:[],productKeysMap:{},chartConfig:{}},[a,t,l,n]),m=e=>{let{active:a,payload:t,label:s}=e;if(a&&t&&t.length&&s){let e=t[0].payload,a=[];return Object.keys(d).forEach(t=>{let r=c[t],s=e[t]||0;r&&s>0&&a.push({name:d[t],value:s,color:r.color||"#ccc",key:t})}),a.sort((e,a)=>a.value-e.value),(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs sm:text-sm shadow-lg max-w-[250px] sm:max-w-xs",children:[(0,r.jsx)("div",{className:"mb-1.5 font-medium",children:s})," ",(0,r.jsxs)("div",{className:"mb-1 border-t pt-1 font-semibold",children:["Total D\xeda: ",z(e.total)]}),(0,r.jsxs)("div",{className:"grid gap-1",children:[a.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[(0,r.jsx)("span",{className:"h-2.5 w-2.5 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),(0,r.jsxs)("span",{className:"text-muted-foreground truncate",children:[e.name,":"]})]}),(0,r.jsx)("span",{className:"font-semibold whitespace-nowrap",children:z(e.value)})]},e.key)),0===a.length&&e.total>0&&(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:"Detalle de productos no disponible para este total."}),0===e.total&&(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:"Sin gastos registrados para este d\xeda."})]})]})}return null};return n?0===a.length||0===o.length||o.every(e=>0===e.total)?(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"An\xe1lisis de Gastos Totales por D\xeda"})}),(0,r.jsx)(P.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No hay gastos para el per\xedodo o filtros seleccionados."})})]}):(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"An\xe1lisis de Gastos Totales por D\xeda"})}),(0,r.jsx)(P.aY,{children:(0,r.jsx)(ek,{config:c,className:"min-h-[250px] sm:min-h-[350px] w-full",children:(0,r.jsx)(em.h,{width:"100%",height:n&&window.innerWidth<640?250:350,children:(0,r.jsxs)(eu.w,{data:o,margin:{top:5,right:5,left:-25,bottom:5},children:[(0,r.jsx)(ep.q,{vertical:!1,strokeDasharray:"3 3"}),(0,r.jsx)(ex.K,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,fontSize:10,interval:"preserveStartEnd"}),(0,r.jsx)(ef.B,{tickFormatter:e=>z(e),tickLine:!1,axisLine:!1,tickMargin:8,width:60,fontSize:10}),(0,r.jsx)(eh.u,{cursor:{fill:"hsl(var(--muted))",fillOpacity:.3},content:e=>{let{active:a,payload:t,label:s}=e;return(0,r.jsx)(m,{active:a,payload:t,label:s})}}),(0,r.jsx)(eg.u,{type:"linear",dataKey:"total",stroke:"none",fill:"var(--color-total)",fillOpacity:.4,name:"Total"}),(0,r.jsx)(eb.x,{type:"linear",dataKey:"total",stroke:"var(--color-total)",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"var(--color-total)",stroke:"hsl(var(--background))",strokeWidth:2},name:"Total"})]})})})})]}):(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(P.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)(G,{className:"h-full w-full"})})]})}var eE=t(31549),eR=t(53607),eT=t(64011),eP=t(55164),eD=t(40243);let eF=e=>{let a=[];for(let t=0;t<e;t++){let r=360/e*t%360;a.push("hsl(".concat(r,", 70%, 60%)"))}return a},eI=(e,a)=>{let t=new Map;return e.forEach(e=>{let r=e.category||a;t.set(r,(t.get(r)||0)+e.price)}),t};function eZ(e){let{expenses:a,defaultCategoryKey:t}=e,[l,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n(!0)},[]);let{pieData:i,barData:o,chartConfig:d}=(0,s.useMemo)(()=>{if(!l)return{pieData:[],barData:[],chartConfig:{}};let e=eI(a,t);if(0===e.size)return{pieData:[],barData:[],chartConfig:{}};let r=Array.from(e.values()).reduce((e,a)=>e+a,0),s=eF(e.size),n={},i=0,o=[],d=[];return e.forEach((e,a)=>{let t=s[i%s.length];n[a]={label:a,color:t},o.push({name:a,value:e,percentage:r>0?e/r*100:0,fill:t}),d.push({name:a,total:e,fill:t}),i++}),o.sort((e,a)=>a.value-e.value),d.sort((e,a)=>a.total-e.total),{pieData:o,barData:d,chartConfig:n}},[a,t,l]);return l?0===a.length||0===i.length?(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Pastel)"})}),(0,r.jsx)(P.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No hay datos de categor\xedas para mostrar."})})]}),(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Barras)"})}),(0,r.jsx)(P.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No hay datos de categor\xedas para mostrar."})})]})]}):(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Pastel)"})}),(0,r.jsx)(P.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)(ek,{config:d,className:"w-full h-full max-h-[300px] sm:max-h-[350px]",children:(0,r.jsx)(em.h,{width:"100%",height:"100%",children:(0,r.jsxs)(eE.u,{children:[(0,r.jsx)(eh.u,{content:(0,r.jsx)(e=>{let{active:a,payload:t}=e;if(a&&t&&t.length){var s;let e=t[0].payload;return(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium",children:"".concat(e.name)}),(0,r.jsx)("p",{children:"Total: ".concat(z(e.value))}),(0,r.jsx)("p",{children:"Porcentaje: ".concat(null===(s=e.percentage)||void 0===s?void 0:s.toFixed(1),"%")})]})}return null},{})}),(0,r.jsx)(ev.D,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{paddingTop:"10px"},iconSize:10}),(0,r.jsx)(eR.b,{data:i,cx:"50%",cy:"50%",labelLine:!1,outerRadius:"80%",dataKey:"value",nameKey:"name",children:i.map((e,a)=>(0,r.jsx)(eT.b,{fill:e.fill},"cell-".concat(a)))})]})})})})]}),(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Barras)"})}),(0,r.jsx)(P.aY,{className:"min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(ek,{config:d,className:"w-full h-full",children:(0,r.jsx)(em.h,{width:"100%",height:l&&window.innerWidth<640?250:350,children:(0,r.jsxs)(eP.v,{data:o,layout:"vertical",margin:{top:5,right:20,left:50,bottom:5},children:[(0,r.jsx)(ep.q,{strokeDasharray:"3 3",horizontal:!1}),(0,r.jsx)(ex.K,{type:"number",tickFormatter:e=>z(e),fontSize:10}),(0,r.jsx)(ef.B,{dataKey:"name",type:"category",width:80,tick:{fontSize:10,width:75,textAnchor:"end"},interval:0}),(0,r.jsx)(eh.u,{content:(0,r.jsx)(e=>{let{active:a,payload:t,label:s}=e;return a&&t&&t.length?(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium",children:s}),(0,r.jsx)("p",{children:"Total: ".concat(z(t[0].value))})]}):null},{}),cursor:{fill:"hsl(var(--muted))",fillOpacity:.3}}),(0,r.jsx)(eD.$,{dataKey:"total",radius:[0,4,4,0],children:o.map((e,a)=>(0,r.jsx)(eT.b,{fill:e.fill},"cell-".concat(a)))})]})})})})]})]}):(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(P.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(G,{className:"h-full w-full"})})]}),(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(P.aY,{className:"min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(G,{className:"h-full w-full"})})]})]})}var eO=t(12854),eM=t(98455);let eG=eO.fC;eO.xz;let eV=eO.h_,eA=eO.x8,eL=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.aV,{ref:a,className:(0,F.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});eL.displayName=eO.aV.displayName;let eY=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(eV,{children:[(0,r.jsx)(eL,{}),(0,r.jsxs)(eO.VY,{ref:a,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,r.jsxs)(eO.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(eM.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eY.displayName=eO.VY.displayName;let eW=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};eW.displayName="DialogHeader";let eK=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eK.displayName="DialogFooter";let eB=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.Dx,{ref:a,className:(0,F.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});eB.displayName=eO.Dx.displayName;let eH=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.dk,{ref:a,className:(0,F.cn)("text-sm text-muted-foreground",t),...s})});eH.displayName=eO.dk.displayName;let eJ=l.Ry({product:l.Z_().min(1,{message:"El nombre del producto no puede estar vac\xedo."}),price:l.oQ.number().positive({message:"El precio debe ser un n\xfamero positivo."}),category:l.Z_().optional()});function eU(e){let{expense:a,onSave:t,onCancel:l,categories:m,defaultCategoryKey:u}=e,[p,x]=(0,s.useState)(!1),[f,h]=(0,s.useState)(""),g=(0,i.cI)({resolver:(0,n.F)(eJ),defaultValues:{product:a.product.name,price:a.price,category:a.category===u?"":a.category}}),b=g.watch("price");(0,s.useEffect)(()=>{g.reset({product:a.product.name,price:a.price,category:a.category===u?"":a.category}),h(z(a.price))},[a,g,u]),(0,s.useEffect)(()=>{"number"!=typeof b||isNaN(b)?f!==z(0)&&h(z(0)):h(z(b))},[b,f]);let j=(e,a)=>{let t=_(e.target.value),r=z(isNaN(t)?0:t);f!==r&&h(r),a(isNaN(t)?0:t)},v=(e,a)=>{let t=z(isNaN(a)?0:a);f!==t&&h(t),e()};async function y(e){x(!0);try{var r;let s=(null===(r=e.category)||void 0===r?void 0:r.trim())||u,l={...a,product:{...a.product,name:e.product},price:e.price,category:s};await new Promise(e=>setTimeout(e,100)),t(l)}catch(e){console.error("Error al actualizar gasto:",e)}finally{x(!1)}}return(0,r.jsx)(eG,{open:!0,onOpenChange:e=>!e&&l(),children:(0,r.jsxs)(eY,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(eW,{children:[(0,r.jsx)(eB,{children:"Editar Gasto"}),(0,r.jsx)(eH,{children:'Modifica los detalles de tu gasto. Haz clic en "Guardar Cambios" cuando termines.'})]}),(0,r.jsx)(d.l0,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(y),className:"space-y-4 py-4",children:[(0,r.jsx)(d.Wi,{control:g.control,name:"product",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Producto"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"Ej: Caf\xe9",...a})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:g.control,name:"price",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Precio (COP)"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{type:"text",placeholder:z(0),...a,value:f,onChange:e=>j(e,a.onChange),onBlur:()=>v(a.onBlur,a.value),inputMode:"decimal"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:g.control,name:"category",render:e=>{let{field:a}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Categor\xeda (Opcional)"}),(0,r.jsx)(d.NI,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.I,{placeholder:"Ej: Comida",...a,list:"edit-category-suggestions",autoComplete:"off"}),(0,r.jsx)("datalist",{id:"edit-category-suggestions",children:m.map(e=>(0,r.jsx)("option",{value:e},e))})]})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsxs)(eK,{children:[(0,r.jsx)(eA,{asChild:!0,children:(0,r.jsx)(o.z,{type:"button",variant:"outline",onClick:l,children:"Cancelar"})}),(0,r.jsx)(o.z,{type:"submit",disabled:p,children:p?"Guardando...":"Guardar Cambios"})]})]})})]})})}var eX=t(73306),eq=t(57632),eQ=t(4439),e$=t(11163),e0=t(9008),e2=t.n(e0),e1=t(73293),e5=t(22213),e4=t(85265),e3=t(50882),e6=t(92847),e8=t(97870),e7=t(48095),e9=t(52091),ae=t(45005),aa=t(65249),at=t(76108),ar=t(57460),as=t.n(ar),al=t(93162),an=t(76405),ai=t(54046),ao=t(56169),ad=t(81670);let ac=an.fC;an.ZA;let am=an.B4,au=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(an.xz,{ref:a,className:(0,F.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[s,(0,r.jsx)(an.JO,{asChild:!0,children:(0,r.jsx)(ai.Z,{className:"h-4 w-4 opacity-50"})})]})});au.displayName=an.xz.displayName;let ap=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(an.u_,{ref:a,className:(0,F.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(ao.Z,{className:"h-4 w-4"})})});ap.displayName=an.u_.displayName;let ax=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(an.$G,{ref:a,className:(0,F.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(ai.Z,{className:"h-4 w-4"})})});ax.displayName=an.$G.displayName;let af=s.forwardRef((e,a)=>{let{className:t,children:s,position:l="popper",...n}=e;return(0,r.jsx)(an.h_,{children:(0,r.jsxs)(an.VY,{ref:a,className:(0,F.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,r.jsx)(ap,{}),(0,r.jsx)(an.l_,{className:(0,F.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(ax,{})]})})});af.displayName=an.VY.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(an.__,{ref:a,className:(0,F.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=an.__.displayName;let ah=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(an.ck,{ref:a,className:(0,F.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(an.wU,{children:(0,r.jsx)(ad.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(an.eT,{children:s})]})});ah.displayName=an.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(an.Z0,{ref:a,className:(0,F.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=an.Z0.displayName;var ag=t(95553),ab=t(37402),aj=t(8659),av=t(52217);function ay(e){let{className:a,classNames:t,showOutsideDays:s=!0,...l}=e;return(0,r.jsx)(av._W,{showOutsideDays:s,className:(0,F.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,F.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,F.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:a,...t}=e;return(0,r.jsx)(ab.Z,{className:(0,F.cn)("h-4 w-4",a),...t})},IconRight:e=>{let{className:a,...t}=e;return(0,r.jsx)(aj.Z,{className:(0,F.cn)("h-4 w-4",a),...t})}},...l})}ay.displayName="Calendar";var aN=t(86419);let aw=aN.fC,ak=aN.xz,aC=s.forwardRef((e,a)=>{let{className:t,align:s="center",sideOffset:l=4,...n}=e;return(0,r.jsx)(aN.h_,{children:(0,r.jsx)(aN.VY,{ref:a,align:s,sideOffset:l,className:(0,F.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});aC.displayName=aN.VY.displayName;var aS=t(75507),az=t(88426),a_=t(89223),aE=t(12780);let aR=s.forwardRef((e,a)=>{let{className:t,orientation:s="horizontal",decorative:l=!0,...n}=e;return(0,r.jsx)(aE.f,{ref:a,decorative:l,orientation:s,className:(0,F.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...n})});aR.displayName=aE.f.displayName;let aT=eO.fC;eO.xz,eO.x8;let aP=eO.h_,aD=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.aV,{className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});aD.displayName=eO.aV.displayName;let aF=(0,ei.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),aI=s.forwardRef((e,a)=>{let{side:t="right",className:s,children:l,...n}=e;return(0,r.jsxs)(aP,{children:[(0,r.jsx)(aD,{}),(0,r.jsxs)(eO.VY,{ref:a,className:(0,F.cn)(aF({side:t}),s),...n,children:[l,(0,r.jsxs)(eO.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(eM.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});aI.displayName=eO.VY.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.Dx,{ref:a,className:(0,F.cn)("text-lg font-semibold text-foreground",t),...s})}).displayName=eO.Dx.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(eO.dk,{ref:a,className:(0,F.cn)("text-sm text-muted-foreground",t),...s})}).displayName=eO.dk.displayName;var aZ=t(66908);let aO=aZ.zt,aM=aZ.fC,aG=aZ.xz,aV=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...l}=e;return(0,r.jsx)(aZ.VY,{ref:a,sideOffset:s,className:(0,F.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});aV.displayName=aZ.VY.displayName;let aA=s.createContext(null);function aL(){let e=s.useContext(aA);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let aY=s.forwardRef((e,a)=>{let{defaultOpen:t=!0,open:l,onOpenChange:n,className:i,style:o,children:d,...c}=e,m=function(){let[e,a]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{a(window.innerWidth<768)};return e.addEventListener("change",t),a(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}(),[u,p]=s.useState(!1),[x,f]=s.useState(t),h=null!=l?l:x,g=s.useCallback(e=>{let a="function"==typeof e?e(h):e;n?n(a):f(a),"undefined"!=typeof document&&(document.cookie="".concat("sidebar_state","=").concat(a,"; path=/; max-age=").concat(604800))},[n,h]),b=s.useCallback(()=>m?p(e=>!e):g(e=>!e),[m,g,p]);s.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[b]);let j=h?"expanded":"collapsed",v=s.useMemo(()=>({state:j,open:h,setOpen:g,isMobile:m,openMobile:u,setOpenMobile:p,toggleSidebar:b}),[j,h,g,m,u,p,b]);return(0,r.jsx)(aA.Provider,{value:v,children:(0,r.jsx)(aO,{delayDuration:0,children:(0,r.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...o},className:(0,F.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:a,...c,children:d})})})});aY.displayName="SidebarProvider";let aW=s.forwardRef((e,a)=>{let{side:t="left",variant:s="sidebar",collapsible:l="offcanvas",className:n,children:i,...o}=e,{isMobile:d,state:c,openMobile:m,setOpenMobile:u}=aL();return"none"===l?(0,r.jsx)("div",{className:(0,F.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:a,...o,children:i}):d?(0,r.jsx)(aT,{open:m,onOpenChange:u,...o,children:(0,r.jsx)(aI,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:(0,r.jsx)("div",{className:"flex h-full w-full flex-col",children:i})})}):(0,r.jsxs)("div",{ref:a,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":"collapsed"===c?l:"","data-variant":s,"data-side":t,children:[(0,r.jsx)("div",{className:(0,F.cn)("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===s||"inset"===s?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,r.jsx)("div",{className:(0,F.cn)("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===s||"inset"===s?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:(0,r.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});aW.displayName="Sidebar";let aK=s.forwardRef((e,a)=>{let{className:t,onClick:s,...l}=e,{toggleSidebar:n}=aL();return(0,r.jsxs)(o.z,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,F.cn)("h-7 w-7",t),onClick:e=>{null==s||s(e),n()},...l,children:[(0,r.jsx)(a_.Z,{}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});aK.displayName="SidebarTrigger",s.forwardRef((e,a)=>{let{className:t,...s}=e,{toggleSidebar:l}=aL();return(0,r.jsx)("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:l,title:"Toggle Sidebar",className:(0,F.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...s})}).displayName="SidebarRail";let aB=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("main",{ref:a,className:(0,F.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...s})});aB.displayName="SidebarInset",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(c.I,{ref:a,"data-sidebar":"input",className:(0,F.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...s})}).displayName="SidebarInput";let aH=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"header",className:(0,F.cn)("flex flex-col gap-2 p-2",t),...s})});aH.displayName="SidebarHeader",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"footer",className:(0,F.cn)("flex flex-col gap-2 p-2",t),...s})}).displayName="SidebarFooter",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(aR,{ref:a,"data-sidebar":"separator",className:(0,F.cn)("mx-2 w-auto bg-sidebar-border",t),...s})}).displayName="SidebarSeparator";let aJ=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"content",className:(0,F.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})});aJ.displayName="SidebarContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"group",className:(0,F.cn)("relative flex w-full min-w-0 flex-col p-2",t),...s})}).displayName="SidebarGroup",s.forwardRef((e,a)=>{let{className:t,asChild:s=!1,...l}=e,n=s?az.g7:"div";return(0,r.jsx)(n,{ref:a,"data-sidebar":"group-label",className:(0,F.cn)("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...l})}).displayName="SidebarGroupLabel",s.forwardRef((e,a)=>{let{className:t,asChild:s=!1,...l}=e,n=s?az.g7:"button";return(0,r.jsx)(n,{ref:a,"data-sidebar":"group-action",className:(0,F.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...l})}).displayName="SidebarGroupAction",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"group-content",className:(0,F.cn)("w-full text-sm",t),...s})}).displayName="SidebarGroupContent";let aU=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("ul",{ref:a,"data-sidebar":"menu",className:(0,F.cn)("flex w-full min-w-0 flex-col gap-1",t),...s})});aU.displayName="SidebarMenu";let aX=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("li",{ref:a,"data-sidebar":"menu-item",className:(0,F.cn)("group/menu-item relative",t),...s})});aX.displayName="SidebarMenuItem";let aq=(0,ei.j)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),aQ=s.forwardRef((e,a)=>{let{asChild:t=!1,isActive:s=!1,variant:l="default",size:n="default",tooltip:i,className:o,...d}=e,c=t?az.g7:"button",{isMobile:m,state:u}=aL(),p=(0,r.jsx)(c,{ref:a,"data-sidebar":"menu-button","data-size":n,"data-active":s,className:(0,F.cn)(aq({variant:l,size:n}),o),...d});return i?("string"==typeof i&&(i={children:i}),(0,r.jsxs)(aM,{children:[(0,r.jsx)(aG,{asChild:!0,children:p}),(0,r.jsx)(aV,{side:"right",align:"center",hidden:"collapsed"!==u||m,...i})]})):p});aQ.displayName="SidebarMenuButton",s.forwardRef((e,a)=>{let{className:t,asChild:s=!1,showOnHover:l=!1,...n}=e,i=s?az.g7:"button";return(0,r.jsx)(i,{ref:a,"data-sidebar":"menu-action",className:(0,F.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",l&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})}).displayName="SidebarMenuAction",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-sidebar":"menu-badge",className:(0,F.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...s})}).displayName="SidebarMenuBadge",s.forwardRef((e,a)=>{let{className:t,showIcon:l=!1,...n}=e,i=s.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,r.jsxs)("div",{ref:a,"data-sidebar":"menu-skeleton",className:(0,F.cn)("rounded-md h-8 flex gap-2 px-2 items-center",t),...n,children:[l&&(0,r.jsx)(G,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,r.jsx)(G,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})}).displayName="SidebarMenuSkeleton",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("ul",{ref:a,"data-sidebar":"menu-sub",className:(0,F.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...s})}).displayName="SidebarMenuSub",s.forwardRef((e,a)=>{let{...t}=e;return(0,r.jsx)("li",{ref:a,...t})}).displayName="SidebarMenuSubItem",s.forwardRef((e,a)=>{let{asChild:t=!1,size:s="md",isActive:l,className:n,...i}=e,o=t?az.g7:"a";return(0,r.jsx)(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":s,"data-active":l,className:(0,F.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===s&&"text-xs","md"===s&&"text-sm","group-data-[collapsible=icon]:hidden",n),...i})}).displayName="SidebarMenuSubButton";let a$="no definido";function a0(){let e,a,t,l,n,i;let{toast:d}=(0,m.pm)(),{currentUser:c,setCurrentUser:p,loadingAuth:x}=(0,eQ.a)(),f=(0,e$.useRouter)(),[h,g]=(0,eX.Z)("expenses",[]),[k,C]=(0,eX.Z)("categories",[a$]),[S,_]=(0,eX.Z)("lastSyncTimestamp",null),[E,R]=(0,eX.Z)("deletedServerExpenseIds",[]),[D,I]=(0,s.useState)(!1),Z=(0,s.useRef)(null),O=(0,s.useRef)(null),[M,A]=(0,s.useState)(null),[L,Y]=(0,s.useState)(!1),[W,K]=(0,s.useState)("all"),[B,H]=(0,s.useState)("all"),[J,U]=(0,s.useState)(null),[X,q]=(0,s.useState)(null),[Q,$]=(0,s.useState)("allTime"),[ee,ea]=(0,s.useState)("control"),{isMobile:et,setOpenMobile:er,setOpen:es}=aL();(0,s.useEffect)(()=>{I(!0)},[]),(0,s.useEffect)(()=>{D&&!k.includes(a$)&&C(e=>[...e,a$].sort())},[k,C,D]),(0,s.useEffect)(()=>{if(!D)return;let e=new Date,a=null,t=null;if("allTime"===Q)a=null,t=null;else if("7days"===Q)a=(0,j.b)((0,aS.k)(e,6)),t=(0,b.i)(e);else if("30days"===Q)a=(0,j.b)((0,aS.k)(e,29)),t=(0,b.i)(e);else if("90days"===Q)a=(0,j.b)((0,aS.k)(e,89)),t=(0,b.i)(e);else if("custom"===Q)return;U(a),q(t)},[Q,D]);let el=(0,s.useMemo)(()=>D?["all",...Array.from(new Set(h.map(e=>e.product.name))).sort()]:["all"],[h,D]),en=(0,s.useMemo)(()=>D?["all",...Array.from(new Set(h.map(e=>e.category||a$))).sort()]:["all"],[h,D]),ei=(0,s.useMemo)(()=>D?h.filter(e=>{let a="all"===W||e.product.name===W,t="all"===B||(e.category||a$)===B,r=w(e.timestamp);if(!r||!(0,u.J)(r))return!1;let s=!0,l=J?(0,j.b)(J):null,n=X?(0,b.i)(X):null;return l&&n?s=(0,v._)(r,{start:l,end:n}):l?s=r>=l:n&&(s=r<=n),a&&t&&s}):[],[h,W,B,J,X,D]),eo=(0,s.useMemo)(()=>D?ei.reduce((e,a)=>e+a.price,0):0,[ei,D]),ed=(e,a)=>{e(a),$("custom")},em=async()=>{let e=localStorage.getItem("accessToken");if(e)try{fetch("https://back.presupuesto.peryloth.com/api/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})}catch(e){console.error("Error calling logout endpoint:",e)}p(null),localStorage.removeItem("accessToken"),localStorage.removeItem("lastSyncTimestamp"),localStorage.removeItem("deletedServerExpenseIds"),d({title:"Sesi\xf3n Cerrada",description:"Has cerrado sesi\xf3n exitosamente."}),f.push("/login")},eu=async()=>{if(!D||!c){d({title:"Sincronizaci\xf3n Fallida",description:"Debes iniciar sesi\xf3n para sincronizar.",variant:"destructive"});return}Y(!0);let e=localStorage.getItem("accessToken");if(!e){d({title:"Sincronizaci\xf3n Fallida",description:"Token no encontrado. Inicia sesi\xf3n de nuevo.",variant:"destructive"}),Y(!1);return}try{let a=h.map(e=>{let a=!isNaN(parseInt(e.id,10)),t=e.timestamp instanceof Date?e.timestamp:new Date(e.timestamp),r=(0,u.J)(t)?(0,y.WU)(t,"yyyy-MM-dd HH:mm:ss"):new Date().toISOString().slice(0,19).replace("T"," ");return{id:a?e.id:null,local_id:a?null:e.id,product:e.product.name,price:e.price,category:e.category||a$,timestamp:r}}),t=await fetch("https://back.presupuesto.peryloth.com/api/sync/replace-all-client-data",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({expenses:a})});if(!t.ok){let e=await t.json().catch(()=>({message:"Error al enviar cambios (PUSH): ".concat(t.status)}));throw Error(e.message||"Error ".concat(t.status,": ").concat(JSON.stringify(e)))}let r=await t.json();d({title:"Cambios Locales Enviados (Replace All)",description:"".concat(r.created_count||0," creados, ").concat(r.updated_count||0," actualizados por el servidor.")})}catch(e){console.error("Error en la fase PUSH de sincronizaci\xf3n (Replace All):",e),d({title:"Error al Enviar Cambios (Replace All)",description:e.message||"No se pudo enviar los cambios locales.",variant:"destructive"}),Y(!1);return}try{let a=await fetch("https://back.presupuesto.peryloth.com/api/sync/get-all-server-data",{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Error del servidor al obtener datos (PULL): ".concat(a.status)}));throw Error(e.message||"Error ".concat(a.status))}let t=await a.json(),r=t.expenses.filter(e=>!e.deleted_at).map(e=>{let a=parseFloat(e.price),t=w(e.timestamp);return!isNaN(a)&&t&&(0,u.J)(t)&&e.productName?{id:String(e.id),product:{name:e.productName,value:0,color:""},price:a,category:e.category||a$,timestamp:t}:(console.warn("Gasto inv\xe1lido recibido del servidor (PULL):",e),null)}).filter(e=>null!==e).sort((e,a)=>w(a.timestamp).getTime()-w(e.timestamp).getTime());g(r);let s=t.categories.map(e=>e.name),l=Array.from(new Set([a$,...s])).sort();C(l),_(t.server_timestamp),R([]),d({title:"Sincronizaci\xf3n Completada (Pull All)",description:"".concat(r.length," gastos y ").concat(l.length," categor\xedas actualizadas desde el servidor.")})}catch(e){console.error("Error en la fase PULL de sincronizaci\xf3n (Get All):",e),d({title:"Error al Obtener Datos Completos (Pull All)",description:e.message||"No se pudo obtener datos del servidor.",variant:"destructive"})}finally{Y(!1)}};if(D){let r="all"!==W,s="all"!==B,n="allTime"===Q&&!J&&!X;r&&!s&&n?(e="product",a=W,t=W,l=e=>{h.filter(a=>a.product.name===e).forEach(e=>{if(!isNaN(parseInt(e.id,10))){let a=e.id;R(e=>e.includes(a)?e:[...e,a])}}),g(a=>a.filter(a=>a.product.name!==e)),d({title:"Producto Eliminado",description:'Todas las entradas para el producto "'.concat(e,'" han sido eliminadas. Se sincronizar\xe1 la eliminaci\xf3n con el servidor.')})}):s&&!r&&n&&(e="category",a=B,t=B,l=e=>{if(e===a$){d({title:"Acci\xf3n no permitida",description:'La categor\xeda "'.concat(a$,'" no puede ser eliminada, pero sus gastos s\xed.'),variant:"destructive"});return}h.filter(a=>a.category===e).forEach(e=>{if(!isNaN(parseInt(e.id,10))){let a=e.id;R(e=>e.includes(a)?e:[...e,a])}}),g(a=>a.filter(a=>a.category!==e)),k.includes(e)&&C(a=>a.filter(a=>a!==e)),d({title:"Categor\xeda Eliminada",description:'Todas las entradas para la categor\xeda "'.concat(e,'" han sido eliminadas y la categor\xeda removida. Se sincronizar\xe1 la eliminaci\xf3n.')})})}let{minExpenseDateOverall:ep,maxExpenseDateOverall:ex}=(0,s.useMemo)(()=>{if(!D||0===h.length){let e=new Date;return{minExpenseDateOverall:(0,j.b)((0,aS.k)(e,6)),maxExpenseDateOverall:(0,b.i)(e)}}let e=null,a=null;h.forEach(t=>{let r=w(t.timestamp);r&&(0,u.J)(r)&&((null===e||r<e)&&(e=r),(null===a||r>a)&&(a=r))});let t=(0,j.b)((0,aS.k)(new Date,6)),r=(0,b.i)(new Date);return{minExpenseDateOverall:e?(0,j.b)(e):t,maxExpenseDateOverall:a?(0,b.i)(a):r}},[h,D]),ef=null!=J?J:ep,eh=null!=X?X:ex;if(x&&D)return(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center",children:[(0,r.jsx)(G,{className:"h-16 w-16 rounded-full animate-spin"}),(0,r.jsx)("p",{className:"ml-4 text-lg",children:"Cargando..."})]});let eg={control:"Control de Gastos",reporting:"Reporter\xeda",data:"Exportar/Importar Data",profile:"Perfil y Sincronizaci\xf3n"},eb=e=>{ea(e),et?er(!1):es(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e2(),{children:[(0,r.jsxs)("title",{children:[eg[ee]," - Control de Gastos"]}),(0,r.jsx)("meta",{name:"description",content:"Registra y analiza tus gastos f\xe1cilmente."})]}),(0,r.jsxs)(aW,{children:[(0,r.jsx)(aH,{className:"p-4",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-sidebar-foreground",children:"Men\xfa Principal"})}),(0,r.jsx)(aJ,{children:(0,r.jsxs)(aU,{children:[(0,r.jsx)(aX,{children:(0,r.jsxs)(aQ,{onClick:()=>eb("control"),isActive:"control"===ee,tooltip:"Control de Gastos",children:[(0,r.jsx)(e1.Z,{}),(0,r.jsx)("span",{children:"Control de Gastos"})]})}),(0,r.jsx)(aX,{children:(0,r.jsxs)(aQ,{onClick:()=>eb("reporting"),isActive:"reporting"===ee,tooltip:"Reporter\xeda",children:[(0,r.jsx)(e5.Z,{}),(0,r.jsx)("span",{children:"Reporter\xeda"})]})}),(0,r.jsx)(aX,{children:(0,r.jsxs)(aQ,{onClick:()=>eb("data"),isActive:"data"===ee,tooltip:"Exportar/Importar Data",children:[(0,r.jsx)(e4.Z,{}),(0,r.jsx)("span",{children:"Exportar/Importar"})]})}),(0,r.jsx)(aX,{children:(0,r.jsxs)(aQ,{onClick:()=>eb("profile"),isActive:"profile"===ee,tooltip:"Perfil y Sincronizaci\xf3n",children:[(0,r.jsx)(e3.Z,{}),(0,r.jsx)("span",{children:"Perfil"})]})})]})})]}),(0,r.jsxs)(aB,{children:[(0,r.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6 sm:py-4",children:[(0,r.jsxs)(aK,{className:"sm:hidden",children:[(0,r.jsx)(e6.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"})]}),(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-semibold text-foreground grow",children:eg[ee]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground hidden md:block",children:"control"===ee&&"Registra y analiza tus gastos f\xe1cilmente."})]}),(0,r.jsxs)("main",{className:"flex flex-col flex-1 gap-4 p-4 sm:px-6 sm:py-0 md:gap-8",children:["control"===ee&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-1",children:(0,r.jsx)(T,{onAddExpense:e=>{var a;let t=(null===(a=e.category)||void 0===a?void 0:a.trim())?e.category.trim():a$,r={...e,category:t,id:(0,eq.Z)(),timestamp:new Date};t===a$||k.includes(t)||C(e=>[...e,t].sort()),g(e=>[...e,r].sort((e,a)=>{var t,r,s,l;let n=null!==(s=null===(t=w(e.timestamp))||void 0===t?void 0:t.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(a.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),O.current&&O.current.focus()},categories:k.filter(e=>e!==a$),defaultCategoryKey:a$,productInputRef:O})}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(V,{expenses:h})})]}),"reporting"===ee&&(0,r.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,r.jsxs)(P.Zb,{className:"mb-4 md:mb-6",children:[(0,r.jsx)(P.Ol,{children:(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"Filtros de Reporter\xeda"})}),(0,r.jsxs)(P.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(ag._,{htmlFor:"product-filter-select",className:"text-xs sm:text-sm",children:"Filtrar por Producto:"}),(0,r.jsxs)(ac,{onValueChange:K,value:W,disabled:!D,children:[(0,r.jsx)(au,{id:"product-filter-select",className:"w-full mt-1",children:(0,r.jsx)(am,{placeholder:"Seleccionar Producto",children:"all"===W?"Todos los Productos":W})}),(0,r.jsx)(af,{children:el.map(e=>(0,r.jsx)(ah,{value:e,children:"all"===e?"Todos los Productos":e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(ag._,{htmlFor:"category-filter-select",className:"text-xs sm:text-sm",children:"Filtrar por Categor\xeda:"}),(0,r.jsxs)(ac,{onValueChange:H,value:B,disabled:!D,children:[(0,r.jsx)(au,{id:"category-filter-select",className:"w-full mt-1",children:(0,r.jsx)(am,{placeholder:"Seleccionar Categor\xeda",children:"all"===B?"Todas las Categor\xedas":B})}),(0,r.jsx)(af,{children:en.map(e=>(0,r.jsx)(ah,{value:e,children:"all"===e?"Todas las Categor\xedas":e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 items-end",children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsx)(ag._,{htmlFor:"quick-range-select",className:"text-xs sm:text-sm",children:"Rango R\xe1pido:"}),(0,r.jsxs)(ac,{onValueChange:e=>$(e),value:Q,disabled:!D,children:[(0,r.jsx)(au,{id:"quick-range-select",className:"w-full mt-1",children:(0,r.jsx)(am,{placeholder:"Seleccionar Rango"})}),(0,r.jsxs)(af,{children:[(0,r.jsx)(ah,{value:"allTime",children:"Todo el tiempo"}),(0,r.jsx)(ah,{value:"7days",children:"\xdaltimos 7 d\xedas"}),(0,r.jsx)(ah,{value:"30days",children:"\xdaltimos 30 d\xedas"}),(0,r.jsx)(ah,{value:"90days",children:"\xdaltimos 90 d\xedas"}),(0,r.jsx)(ah,{value:"custom",children:"Personalizado"})]})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(ag._,{htmlFor:"start-date-filter",className:"text-xs sm:text-sm",children:"Fecha Desde:"}),(0,r.jsxs)(aw,{children:[(0,r.jsx)(ak,{asChild:!0,children:(0,r.jsxs)(o.z,{id:"start-date-filter",variant:"outline",className:(0,F.cn)("w-full justify-start text-left font-normal mt-1",!J&&"text-muted-foreground"),disabled:!D,children:[(0,r.jsx)(e8.Z,{className:"mr-2 h-4 w-4"}),J?(0,y.WU)(J,"PPP",{locale:N.es}):(0,r.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,r.jsx)(aC,{className:"w-auto p-0",children:(0,r.jsx)(ay,{mode:"single",selected:J||void 0,onSelect:e=>ed(U,e||null),initialFocus:!0})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(ag._,{htmlFor:"end-date-filter",className:"text-xs sm:text-sm",children:"Fecha Hasta:"}),(0,r.jsxs)(aw,{children:[(0,r.jsx)(ak,{asChild:!0,children:(0,r.jsxs)(o.z,{id:"end-date-filter",variant:"outline",className:(0,F.cn)("w-full justify-start text-left font-normal mt-1",!X&&"text-muted-foreground"),disabled:!D,children:[(0,r.jsx)(e8.Z,{className:"mr-2 h-4 w-4"}),X?(0,y.WU)(X,"PPP",{locale:N.es}):(0,r.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,r.jsx)(aC,{className:"w-auto p-0",children:(0,r.jsx)(ay,{mode:"single",selected:X||void 0,onSelect:e=>ed(q,e||null),disabled:e=>!!J&&e<J,initialFocus:!0})})]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(o.z,{onClick:()=>{K("all"),H("all"),$("allTime")},variant:"outline",className:"w-full sm:w-auto mt-2 sm:mt-0",disabled:!D,children:[(0,r.jsx)(e7.Z,{className:"mr-2 h-4 w-4"})," Limpiar Filtros"]})})]})]}),(0,r.jsx)(e_,{expenses:ei,startDate:ef,endDate:eh}),(0,r.jsx)(eZ,{expenses:ei,defaultCategoryKey:a$}),(0,r.jsxs)(P.Zb,{children:[(0,r.jsxs)(P.Ol,{children:[(0,r.jsx)(P.ll,{className:"text-lg sm:text-xl",children:"all"!==W&&"all"!==B?"Historial de ".concat(W," (").concat(B,")"):"all"!==W?"Historial de ".concat(W):"all"!==B?"Historial de ".concat(B):"Historial Completo de Gastos"}),(0,r.jsx)(P.SZ,{children:(n="",n="all"!==W&&"all"!==B?"Gastos para ".concat(W," (").concat(B,")"):"all"!==W?"Gastos para el producto ".concat(W):"all"!==B?"Gastos para la categor\xeda ".concat(B):"Todos los gastos registrados",i="",i=J&&X?" entre ".concat((0,y.WU)(J,"PPP",{locale:N.es})," y ").concat((0,y.WU)(X,"PPP",{locale:N.es})):J?" desde ".concat((0,y.WU)(J,"PPP",{locale:N.es})):X?" hasta ".concat((0,y.WU)(X,"PPP",{locale:N.es})):" (todo el tiempo)","".concat(n).concat(i,". Total: ").concat(z(eo)))})]}),(0,r.jsx)(P.aY,{className:"px-0 sm:px-6 sm:pb-6",children:D?(0,r.jsx)(ec,{expenses:ei,onDeleteExpense:e=>{let a=h.find(a=>a.id===e);a&&!isNaN(parseInt(a.id,10))&&R(e=>{let t=a.id;return e.includes(t)?e:[...e,t]}),g(a=>a.filter(a=>a.id!==e))},onEditExpense:e=>{A(e)},groupName:a,onDeleteGroup:l,groupTypeLabel:e,groupDisplayName:t,defaultCategoryKey:a$}):(0,r.jsx)(G,{className:"h-64 w-full"})})]})]}),"data"===ee&&(0,r.jsxs)(P.Zb,{children:[(0,r.jsxs)(P.Ol,{children:[(0,r.jsx)(P.ll,{children:"Exportar/Importar Data (CSV)"}),(0,r.jsx)(P.SZ,{children:"Exporta tus gastos a un archivo CSV o importa desde uno existente."})]}),(0,r.jsxs)(P.aY,{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,r.jsx)("input",{type:"file",ref:Z,onChange:e=>{if(!D||!e.target.files||0===e.target.files.length)return;let a=e.target.files[0],t=new FileReader;t.onload=e=>{var a;let t=null===(a=e.target)||void 0===a?void 0:a.result;if("string"==typeof t)try{let e=as().parse(t,{header:!0,skipEmptyLines:!0}),a=[],r=new Set(k),s=0;e.errors.length>0&&(e.errors.forEach(e=>console.error("CSV Parsing Error:",e)),d({title:"Error de Formato CSV",description:"Se encontraron ".concat(e.errors.length," errores al leer el archivo. Verifica el formato."),variant:"destructive"})),e.data.forEach((e,t)=>{var l,n,i,o;let d=null===(l=e.Producto)||void 0===l?void 0:l.trim(),c=null===(n=e.Precio)||void 0===n?void 0:n.trim(),m=(null===(i=e.Categoria)||void 0===i?void 0:i.trim())||a$,p=null===(o=e.Timestamp)||void 0===o?void 0:o.trim(),x=parseFloat(c),f=w(p);if(!f&&"string"==typeof p){let e=p.match(/(\d{2})\/(\d{2})\/(\d{4})\s(\d{2}):(\d{2}):(\d{2})/),a=p.match(/(\d{2})\/(\d{2})\/(\d{4})\s(\d{2}):(\d{2})/),r=e||a;if(r){let a=r[1],s=r[2],l=r[3],n=r[4],i=r[5],o=e?r[6]:"00",d="".concat(l,"-").concat(s,"-").concat(a,"T").concat(n,":").concat(i,":").concat(o);f=w(d),(0,u.J)(f)||(console.warn("Fila ".concat(t+2,": Fall\xf3 el intento de parseo de fecha custom: ").concat(p," -> ").concat(d)),f=null)}else console.warn("Fila ".concat(t+2,": Formato de fecha no reconocido al importar: ").concat(p))}if(!d||isNaN(x)||x<=0||!f||!(0,u.J)(f)){console.warn("Fila ".concat(t+2," omitida: Datos inv\xe1lidos (Producto: ").concat(d,", Precio: ").concat(c,", Timestamp: ").concat(p,", Fecha Parseada: ").concat(f,")")),s++;return}let h={id:e.ID_Frontend||(0,eq.Z)(),product:{name:d,value:0,color:""},price:x,category:m,timestamp:f};a.push(h),m!==a$&&m&&r.add(m)}),a.length>0&&(g(e=>[...e,...a].sort((e,a)=>{var t,r,s,l;let n=null!==(s=null===(t=w(e.timestamp))||void 0===t?void 0:t.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(a.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),C(Array.from(r).sort())),d({title:"Importaci\xf3n Completa",description:"".concat(a.length," gastos importados. ").concat(s>0?"".concat(s," filas omitidas por datos inv\xe1lidos."):"")})}catch(e){console.error("Error al importar CSV:",e),d({title:"Error de Importaci\xf3n",description:"No se pudo procesar el archivo CSV.",variant:"destructive"})}finally{Z.current&&(Z.current.value="")}},t.onerror=e=>{console.error("Error al leer archivo:",e),d({title:"Error de Lectura",description:"No se pudo leer el archivo seleccionado.",variant:"destructive"}),Z.current&&(Z.current.value="")},t.readAsText(a)},accept:".csv",style:{display:"none"},id:"import-csv-input"}),D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.z,{onClick:()=>{if(!D)return;let e=h.map(e=>({ID_Frontend:e.id,Producto:e.product.name,Precio:e.price,Categoria:e.category,Timestamp:e.timestamp instanceof Date?e.timestamp.toISOString():new Date(e.timestamp).toISOString()})),a=new Blob([as().unparse(e,{header:!0})],{type:"text/csv;charset=utf-8;"});(0,al.saveAs)(a,"gastos.csv"),d({title:"Exportaci\xf3n Completa",description:"Los datos de gastos se han exportado a gastos.csv."})},variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(e9.Z,{className:"mr-2 h-4 w-4"})," Exportar a CSV"]}),(0,r.jsxs)(o.z,{onClick:()=>{D&&Z.current&&Z.current.click()},variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(ae.Z,{className:"mr-2 h-4 w-4"})," Importar desde CSV"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{className:"h-10 w-full sm:w-[150px]"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[170px]"})]})]})]}),"profile"===ee&&(0,r.jsxs)(P.Zb,{children:[(0,r.jsx)(P.Ol,{children:(0,r.jsxs)(P.ll,{className:"flex items-center",children:[(0,r.jsx)(e3.Z,{className:"mr-2 h-6 w-6"})," Perfil y Sincronizaci\xf3n"]})}),(0,r.jsx)(P.aY,{className:"space-y-4",children:D&&c?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("p",{className:"text-lg",children:["\xa1Bienvenido de nuevo, ",(0,r.jsx)("span",{className:"font-semibold",children:c.name||c.email}),"!"]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Email: ",c.email]}),(0,r.jsx)(o.z,{onClick:eu,className:"w-full sm:w-auto",disabled:L,children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(aa.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Sincronizando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(aa.Z,{className:"mr-2 h-4 w-4"})," Sincronizar Datos"]})}),(0,r.jsxs)(o.z,{onClick:em,variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(at.Z,{className:"mr-2 h-4 w-4"})," Cerrar Sesi\xf3n"]})]}):D?(0,r.jsxs)("div",{className:"space-y-3 text-center sm:text-left",children:[(0,r.jsx)("p",{children:"Inicia sesi\xf3n o reg\xedstrate para sincronizar tus datos entre dispositivos."}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Puedes seguir usando la aplicaci\xf3n localmente sin una cuenta."}),(0,r.jsxs)(o.z,{onClick:()=>f.push("/login"),className:"w-full sm:w-auto",children:[(0,r.jsx)(e3.Z,{className:"mr-2 h-4 w-4"})," Ir a Iniciar Sesi\xf3n / Registrarse"]})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(G,{className:"h-8 w-3/4"}),(0,r.jsx)(G,{className:"h-6 w-1/2"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[220px]"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[150px]"})]})})]})]})]}),M&&D&&(0,r.jsx)(eU,{expense:M,onSave:e=>{var a;let t=(null===(a=e.category)||void 0===a?void 0:a.trim())?e.category.trim():a$,r={...e,category:t};g(e=>e.map(e=>e.id===r.id?r:e).sort((e,a)=>{var t,r,s,l;let n=null!==(s=null===(t=w(e.timestamp))||void 0===t?void 0:t.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(a.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),t===a$||k.includes(t)||C(e=>[...e,t].sort()),A(null),d({title:"Gasto Actualizado",description:'El gasto "'.concat(r.product.name,'" ha sido actualizado.')})},onCancel:()=>{A(null)},categories:k.filter(e=>e!==a$),defaultCategoryKey:a$})]})}function a2(){return(0,r.jsx)(aY,{children:(0,r.jsx)(a0,{})})}},28728:function(e,a,t){"use strict";t.d(a,{d:function(){return o},z:function(){return d}});var r=t(85893),s=t(67294),l=t(88426),n=t(12003),i=t(53776);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:d=!1,...c}=e,m=d?l.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:s,size:n,className:t})),ref:a,...c})});d.displayName="Button"},47903:function(e,a,t){"use strict";t.d(a,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var r=t(85893),s=t(67294),l=t(53776);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},96164:function(e,a,t){"use strict";t.d(a,{NI:function(){return h},Wi:function(){return m},l0:function(){return d},lX:function(){return f},xJ:function(){return x},zG:function(){return g}});var r=t(85893),s=t(67294),l=t(88426),n=t(87536),i=t(53776),o=t(95553);let d=n.RV,c=s.createContext({}),m=e=>{let{...a}=e;return(0,r.jsx)(c.Provider,{value:{name:a.name},children:(0,r.jsx)(n.Qr,{...a})})},u=()=>{let e=s.useContext(c),a=s.useContext(p),{getFieldState:t,formState:r}=(0,n.Gc)(),l=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=a;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},p=s.createContext({}),x=s.forwardRef((e,a)=>{let{className:t,...l}=e,n=s.useId();return(0,r.jsx)(p.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:a,className:(0,i.cn)("space-y-2",t),...l})})});x.displayName="FormItem";let f=s.forwardRef((e,a)=>{let{className:t,...s}=e,{error:l,formItemId:n}=u();return(0,r.jsx)(o._,{ref:a,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...s})});f.displayName="FormLabel";let h=s.forwardRef((e,a)=>{let{...t}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=u();return(0,r.jsx)(l.g7,{ref:a,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...t})});h.displayName="FormControl",s.forwardRef((e,a)=>{let{className:t,...s}=e,{formDescriptionId:l}=u();return(0,r.jsx)("p",{ref:a,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})}).displayName="FormDescription";let g=s.forwardRef((e,a)=>{var t;let{className:s,children:l,...n}=e,{error:o,formMessageId:d}=u(),c=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):l;return c?(0,r.jsx)("p",{ref:a,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});g.displayName="FormMessage"},85451:function(e,a,t){"use strict";t.d(a,{I:function(){return n}});var r=t(85893),s=t(67294),l=t(53776);let n=s.forwardRef((e,a)=>{let{className:t,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},95553:function(e,a,t){"use strict";t.d(a,{_:function(){return d}});var r=t(85893),s=t(67294),l=t(49102),n=t(12003),i=t(53776);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.f,{ref:a,className:(0,i.cn)(o(),t),...s})});d.displayName=l.f.displayName}},function(e){e.O(0,[487,729,888,774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);