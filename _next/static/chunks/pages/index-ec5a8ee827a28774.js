(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(60036)}])},60036:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return t2}});var r=a(85893),s=a(67294),l=a(1604),n=a(56312),i=a(87536),o=a(28728),d=a(96164),c=a(85451),m=a(8887),u=a(64162),p=a(39784),f=a(37888),x=a(16045),h=a(42932),g=a(69508),b=a(10524),j=a(71371),v=a(61551),y=a(29302),N=a(52688);let w=e=>{if(e instanceof Date&&(0,u.J)(e))return e;if("string"==typeof e){let t=(0,p.D)(e);if((0,u.J)(t))return t}if("number"==typeof e){let t=new Date(e);if((0,u.J)(t))return t}return null},k=(e,t)=>{let a,r;let s=new Date;switch(t){case"week":a=(0,f.z)(s,{weekStartsOn:1}),r=(0,x.v)(s,{weekStartsOn:1});break;case"month":a=(0,h.N)(s),r=(0,g.V)(s);break;case"bi-weekly":let l=(0,h.N)(s),n=(0,g.V)(s),i=(0,b.i)(new Date(s.getFullYear(),s.getMonth(),15));s<=i?(a=(0,j.b)(l),r=i):(a=(0,j.b)(new Date(s.getFullYear(),s.getMonth(),16)),r=(0,b.i)(n));break;default:return[]}return a=(0,j.b)(a),r=(0,b.i)(r),e.filter(e=>{let t=w(e.timestamp);return t&&(0,v._)(t,{start:a,end:r})})},S=e=>e.reduce((e,t)=>e+(t.price||0),0),C=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}),z=e=>((null==e||isNaN(e))&&(e=0),C.format(e)),_=e=>{if(null==e)return 0;let t=parseInt(String(e).replace(/[^\d]/g,""),10);return isNaN(t)?0:t},E=e=>{let t=w(e);if(!t)return"Fecha inv\xe1lida";let a=N.es;try{return(0,y.WU)(t,"PPpp",{locale:a})}catch(a){return console.error("Error formatting date:",a,"Input:",e,"Parsed:",t),t.toLocaleDateString("es-ES")+" "+t.toLocaleTimeString("es-ES")}},R=()=>l.Ry({product:l.Z_().min(1,{message:"El nombre del producto no puede estar vac\xedo."}),price:l.oQ.number().positive({message:"El precio debe ser un n\xfamero positivo."}),category:l.Z_().optional()});function P(e){let{onAddExpense:t,categories:a,defaultCategoryKey:l,productInputRef:u}=e,{toast:p}=(0,m.pm)(),[f,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),b=(0,s.useMemo)(()=>R(),[]),j=(0,i.cI)({resolver:(0,n.F)(b),defaultValues:{product:"",price:0,category:""}}),v=j.watch("price");(0,s.useEffect)(()=>{"number"!=typeof v||isNaN(v)?g(z(0)):g(z(v))},[v]);let y=(e,t)=>{let a=_(e.target.value);g(z(isNaN(a)?0:a)),t(isNaN(a)?0:a)},N=(e,t)=>{g(z(isNaN(t)?0:t)),e()};async function w(e){x(!0);try{var a,r;let s=(null===(a=e.category)||void 0===a?void 0:a.trim())||l;await new Promise(e=>setTimeout(e,100)),t({product:{name:e.product,color:"",value:0},price:e.price,category:s}),p({title:"Gasto agregado",description:"Producto: ".concat(e.product,", Precio: ").concat(z(e.price),", Categor\xeda: ").concat(s)}),j.reset({product:"",price:0,category:""}),g(z(0)),null===(r=u.current)||void 0===r||r.focus()}catch(e){console.error("Error al agregar gasto:",e),p({title:"Error",description:"No se pudo agregar el gasto.",variant:"destructive"})}finally{x(!1)}}return(0,r.jsx)(d.l0,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(w),className:"space-y-3 sm:space-y-4 rounded-lg border bg-card p-4 sm:p-6 shadow-sm",children:[(0,r.jsx)(d.Wi,{control:j.control,name:"product",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Producto"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"Ej: Caf\xe9",...t,ref:u})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:j.control,name:"price",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Precio (COP)"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{type:"text",placeholder:z(0),...t,value:h,onChange:e=>y(e,t.onChange),onBlur:()=>N(t.onBlur,t.value),inputMode:"decimal"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:j.control,name:"category",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{className:"text-xs sm:text-sm",children:"Categor\xeda (Opcional)"}),(0,r.jsx)(d.NI,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.I,{placeholder:"Ej: Comida",...t,list:"category-suggestions",autoComplete:"off"}),(0,r.jsx)("datalist",{id:"category-suggestions",children:a.map(e=>(0,r.jsx)("option",{value:e},e))})]})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(o.z,{type:"submit",disabled:f,className:"w-full sm:w-auto",children:f?"Agregando...":"Agregar Gasto"})]})})}var T=a(47903),D=a(31702),F=a(53776);let I=D.fC,Z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.aV,{ref:t,className:(0,F.cn)("inline-flex h-auto min-h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});Z.displayName=D.aV.displayName;let M=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.xz,{ref:t,className:(0,F.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});M.displayName=D.xz.displayName;let O=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.VY,{ref:t,className:(0,F.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});function G(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,F.cn)("animate-pulse rounded-md bg-muted",t),...a})}function V(e){let{expenses:t}=e,[a,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[u,p]=(0,s.useState)(0),[f,x]=(0,s.useState)(0),[h,g]=(0,s.useState)(0);(0,s.useEffect)(()=>{l(!0);let e=k(t,"week"),a=k(t,"bi-weekly"),r=k(t,"month");i(S(e)),d(S(a)),m(S(r)),p(e.length),x(a.length),g(r.length)},[t]);let b=e=>{let t,s,l,i;switch(e){case"week":t=n,s=u,l="Total Gastado esta Semana",i="semana";break;case"bi-weekly":t=o,s=f,l="Total Gastado esta Quincena",i="quincena";break;case"month":t=c,s=h,l="Total Gastado este Mes",i="mes"}return a&&null!==t?(0,r.jsxs)("div",{className:"mt-4 p-3 sm:p-4 rounded-md border bg-card",children:[" ",(0,r.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:l})," ",(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:z(t)})," ",(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[s," gasto(s) esta ",i,"."]})," "]}):(0,r.jsxs)("div",{className:"mt-4 p-3 sm:p-4 rounded-md border bg-card space-y-2",children:[" ",(0,r.jsx)(G,{className:"h-5 sm:h-6 w-3/4"}),(0,r.jsx)(G,{className:"h-7 sm:h-8 w-1/2"}),(0,r.jsx)(G,{className:"h-4 w-1/4"})]})};return(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{className:"px-4 py-3 sm:px-6 sm:py-4",children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:a?"Resumen de Gastos":(0,r.jsx)(G,{className:"h-6 w-1/2"})})}),(0,r.jsx)(T.aY,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:(0,r.jsxs)(I,{defaultValue:"week",className:"w-full",children:[(0,r.jsxs)(Z,{className:"grid w-full grid-cols-3 h-auto text-xs sm:text-sm",children:[" ",a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M,{value:"week",className:"py-1.5 sm:py-2",children:"Semana"})," ",(0,r.jsx)(M,{value:"bi-weekly",className:"py-1.5 sm:py-2",children:"Quincena"})," ",(0,r.jsx)(M,{value:"month",className:"py-1.5 sm:py-2",children:"Mes"})," "]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{className:"h-9 w-full"}),(0,r.jsx)(G,{className:"h-9 w-full"}),(0,r.jsx)(G,{className:"h-9 w-full"})]})]}),(0,r.jsx)(O,{value:"week",children:b("week")}),(0,r.jsx)(O,{value:"bi-weekly",children:b("bi-weekly")}),(0,r.jsx)(O,{value:"month",children:b("month")})]})})]})}O.displayName=D.VY.displayName;let A=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{ref:t,className:(0,F.cn)("w-full caption-bottom text-sm",a),...s})})});A.displayName="Table";let L=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,F.cn)("[&_tr]:border-b",a),...s})});L.displayName="TableHeader";let Y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,F.cn)("[&_tr:last-child]:border-0",a),...s})});Y.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,F.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let W=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,F.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});W.displayName="TableRow";let H=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,F.cn)("h-10 sm:h-12 px-2 sm:px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 whitespace-nowrap",a),...s})});H.displayName="TableHead";let U=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,F.cn)("p-2 sm:p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});U.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,F.cn)("mt-4 text-xs sm:text-sm text-muted-foreground px-2 sm:px-4",a),...s})}).displayName="TableCaption";var K=a(73260),J=a(50186),B=a(89532);let $=B.fC,X=B.xz,q=B.h_,Q=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(B.aV,{className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});Q.displayName=B.aV.displayName;let ee=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(q,{children:[(0,r.jsx)(Q,{}),(0,r.jsx)(B.VY,{ref:t,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});ee.displayName=B.VY.displayName;let et=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};et.displayName="AlertDialogHeader";let ea=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ea.displayName="AlertDialogFooter";let er=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(B.Dx,{ref:t,className:(0,F.cn)("text-lg font-semibold",a),...s})});er.displayName=B.Dx.displayName;let es=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(B.dk,{ref:t,className:(0,F.cn)("text-sm text-muted-foreground",a),...s})});es.displayName=B.dk.displayName;let el=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(B.aU,{ref:t,className:(0,F.cn)((0,o.d)(),a),...s})});el.displayName=B.aU.displayName;let en=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(B.$j,{ref:t,className:(0,F.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});en.displayName=B.$j.displayName;var ei=a(12003);let eo=(0,ei.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ed(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,F.cn)(eo({variant:a}),t),...s})}function ec(e){let{expenses:t,onDeleteExpense:a,onEditExpense:s,groupName:l,groupDisplayName:n,onDeleteGroup:i,groupTypeLabel:d,defaultCategoryKey:c}=e,{toast:u}=(0,m.pm)(),p="product"===d?"Producto":"category"===d?"Categor\xeda":"Grupo",f=e=>{a(e),u({title:"Gasto eliminado",description:"El gasto ha sido eliminado exitosamente."})},x=e=>{i&&e&&i(e)};if(!t||0===t.length)return(0,r.jsx)("div",{className:"text-muted-foreground text-center p-4",children:"No hay gastos para mostrar con los filtros seleccionados."});let h=!!i&&!!l&&!!d;return(0,r.jsxs)(r.Fragment,{children:[h&&l&&(0,r.jsx)("div",{className:"mb-4 text-right",children:(0,r.jsxs)($,{children:[(0,r.jsx)(X,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"destructive",size:"sm",className:"w-full sm:w-auto",disabled:"category"===d&&l===c,children:[(0,r.jsx)(K.Z,{className:"mr-2 h-4 w-4"})," Eliminar ",p," (",n||l,")"]})}),(0,r.jsxs)(ee,{children:[(0,r.jsxs)(et,{children:[(0,r.jsx)(er,{children:"\xbfEst\xe1s seguro?"}),(0,r.jsxs)(es,{children:["Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente todas las entradas para ",p.toLowerCase(),' "',n||l,'".',"category"===d&&l!==c&&" La categor\xeda tambi\xe9n ser\xe1 eliminada de la lista de sugerencias."]})]}),(0,r.jsxs)(ea,{children:[(0,r.jsx)(en,{children:"Cancelar"}),(0,r.jsxs)(el,{onClick:()=>x(l),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Eliminar ",p]})]})]})]})}),(0,r.jsxs)(A,{children:[(0,r.jsx)(L,{children:(0,r.jsxs)(W,{children:[(0,r.jsx)(H,{className:"px-2 py-2 sm:px-4",children:"Producto"}),(0,r.jsx)(H,{className:"px-2 py-2 sm:px-4",children:"Precio"}),(0,r.jsx)(H,{className:"hidden md:table-cell px-2 py-2 sm:px-4",children:"Categor\xeda"}),(0,r.jsx)(H,{className:"hidden lg:table-cell px-2 py-2 sm:px-4",children:"Fecha y Hora"}),(0,r.jsx)(H,{className:"text-right px-2 py-2 sm:px-4",children:"Acciones"})]})}),(0,r.jsx)(Y,{children:t.sort((e,t)=>{var a,r,s,l;let n=null!==(s=null===(a=w(e.timestamp))||void 0===a?void 0:a.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(t.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n}).map(e=>(0,r.jsxs)(W,{children:[(0,r.jsx)(U,{className:"font-medium px-2 py-2 sm:px-4 truncate max-w-[100px] sm:max-w-xs",children:e.product.name}),(0,r.jsx)(U,{className:"px-2 py-2 sm:px-4 whitespace-nowrap",children:z(e.price)}),(0,r.jsx)(U,{className:"hidden md:table-cell px-2 py-2 sm:px-4",children:(0,r.jsx)(ed,{variant:e.category===c?"secondary":"outline",className:"text-xs",children:e.category||c})}),(0,r.jsx)(U,{className:"hidden lg:table-cell px-2 py-2 sm:px-4 whitespace-nowrap",children:E(e.timestamp)}),(0,r.jsxs)(U,{className:"text-right px-2 py-2 sm:px-4",children:[(0,r.jsxs)(o.z,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"mr-1",children:[(0,r.jsx)(J.Z,{className:"h-4 w-4 text-blue-500"}),(0,r.jsx)("span",{className:"sr-only",children:"Editar"})]}),(0,r.jsxs)($,{children:[(0,r.jsx)(X,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"ghost",size:"icon",children:[(0,r.jsx)(K.Z,{className:"h-4 w-4 text-destructive"}),(0,r.jsx)("span",{className:"sr-only",children:"Eliminar"})]})}),(0,r.jsxs)(ee,{children:[(0,r.jsxs)(et,{children:[(0,r.jsx)(er,{children:"\xbfEst\xe1s seguro?"}),(0,r.jsxs)(es,{children:['Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente el gasto "',e.product.name,'" con precio ',z(e.price),"."]})]}),(0,r.jsxs)(ea,{children:[(0,r.jsx)(en,{children:"Cancelar"}),(0,r.jsx)(el,{onClick:()=>f(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar Gasto"})]})]})]})]})]},e.id))})]})]})}var em=a(45450),eu=a(23435),ep=a(3112),ef=a(24961),ex=a(45218),eh=a(11029),eg=a(11345),eb=a(45032),ej=a(55623),ev=a(53878);let ey={light:"",dark:".dark"},eN=s.createContext(null);function ew(){let e=s.useContext(eN);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let ek=s.forwardRef((e,t)=>{let{id:a,className:l,children:n,config:i,...o}=e,d=s.useId(),c="chart-".concat(a||d.replace(/:/g,""));return(0,r.jsx)(eN.Provider,{value:{config:i},children:(0,r.jsxs)("div",{"data-chart":c,ref:t,className:(0,F.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,r.jsx)(eS,{id:c,config:i}),n]})})});ek.displayName="Chart";let eS=e=>{let{id:t,config:a}=e,s=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(ey).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[r,s]=e,l=(null===(t=s.theme)||void 0===t?void 0:t[a])||s.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};function eC(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e?e[s]:e[a]}eh.u,s.forwardRef((e,t)=>{let{active:a,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:c,labelFormatter:m,labelClassName:u,formatter:p,color:f,nameKey:x,labelKey:h}=e,{config:g}=ew(),b=s.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[t]=l,a="".concat(h||t.dataKey||t.name||"value"),s=eC(g,t,a),n=h||"string"!=typeof c?null==s?void 0:s.label:(null===(e=g[c])||void 0===e?void 0:e.label)||c;return m?(0,r.jsx)("div",{className:(0,F.cn)("font-medium",u),children:m(n,l)}):n?(0,r.jsx)("div",{className:(0,F.cn)("font-medium",u),children:n}):null},[c,m,l,o,u,g,h]);if(!a||!(null==l?void 0:l.length))return null;let j=1===l.length&&"dot"!==i;return(0,r.jsxs)("div",{ref:t,className:(0,F.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,r.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let a="".concat(x||e.name||e.dataKey||"value"),s=eC(g,e,a),l=f||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,F.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.icon)?(0,r.jsx)(s.icon,{}):!d&&(0,r.jsx)("div",{className:(0,F.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":j&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,F.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}).displayName="ChartTooltip",ev.D,s.forwardRef((e,t)=>{let{className:a,hideIcon:s=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=ew();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:t,className:(0,F.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",a),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),a=eC(o,e,t);return(0,r.jsxs)("div",{className:(0,F.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!s?(0,r.jsx)(a.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null}).displayName="ChartLegend";let ez=(e,t,a)=>{let r={},s=new Map,l=(0,j.b)(t),n=(0,j.b)(a);if(l>n)return{data:[],productKeysMap:{},chartConfig:{}};(0,ej.D)({start:l,end:n}).forEach(e=>{let t=(0,y.WU)(e,"dd MMM",{locale:N.es});s.set((0,y.WU)(e,"yyyy-MM-dd"),{date:t,_rawDate:e,total:0})}),e.forEach(e=>{let t=w(e.timestamp);if(!t)return;let a=(0,j.b)(t),l=(0,y.WU)(a,"yyyy-MM-dd"),n=s.get(l);if(n){let t=e.product.name;r[t]||(r[t]=e.product.name),n.total+=e.price,n[t]=(n[t]||0)+e.price}});let i=Array.from(s.values()).sort((e,t)=>e._rawDate.getTime()-t._rawDate.getTime()).map(e=>{let t={...e};return Object.keys(r).forEach(e=>{e in t||(t[e]=0)}),t}),o={total:{label:"Total",color:"hsl(var(--chart-1))"}};return Object.keys(r).forEach((e,t)=>{let a=360/(Object.keys(r).length+2)*t%360;o[e]={label:r[e],color:"hsl(".concat(a,", ").concat(Math.floor(21*Math.random())+70,"%, ").concat(Math.floor(21*Math.random())+55,"%)")}}),{data:i,productKeysMap:r,chartConfig:o}};function e_(e){let{expenses:t,startDate:a,endDate:l}=e,[n,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i(!0)},[]);let{data:o,productKeysMap:d,chartConfig:c}=(0,s.useMemo)(()=>n?ez(t,a,l):{data:[],productKeysMap:{},chartConfig:{}},[t,a,l,n]),m=e=>{let{active:t,payload:a,label:s}=e;if(t&&a&&a.length&&s){let e=a[0].payload,t=[];return Object.keys(d).forEach(a=>{let r=c[a],s=e[a]||0;r&&s>0&&t.push({name:d[a],value:s,color:r.color||"#ccc",key:a})}),t.sort((e,t)=>t.value-e.value),(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs sm:text-sm shadow-lg max-w-[250px] sm:max-w-xs",children:[(0,r.jsx)("div",{className:"mb-1.5 font-medium",children:s})," ",(0,r.jsxs)("div",{className:"mb-1 border-t pt-1 font-semibold",children:["Total D\xeda: ",z(e.total)]}),(0,r.jsxs)("div",{className:"grid gap-1",children:[t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[(0,r.jsx)("span",{className:"h-2.5 w-2.5 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),(0,r.jsxs)("span",{className:"text-muted-foreground truncate",children:[e.name,":"]})]}),(0,r.jsx)("span",{className:"font-semibold whitespace-nowrap",children:z(e.value)})]},e.key)),0===t.length&&e.total>0&&(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:"Detalle de productos no disponible para este total."}),0===e.total&&(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:"Sin gastos registrados para este d\xeda."})]})]})}return null};return n?0===t.length||0===o.length||o.every(e=>0===e.total)?(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"An\xe1lisis de Gastos Totales por D\xeda"})}),(0,r.jsx)(T.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No hay gastos para el per\xedodo o filtros seleccionados."})})]}):(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"An\xe1lisis de Gastos Totales por D\xeda"})}),(0,r.jsx)(T.aY,{children:(0,r.jsx)(ek,{config:c,className:"min-h-[250px] sm:min-h-[350px] w-full",children:(0,r.jsx)(em.h,{width:"100%",height:n&&window.innerWidth<640?250:350,children:(0,r.jsxs)(eu.w,{data:o,margin:{top:5,right:5,left:-25,bottom:5},children:[(0,r.jsx)(ep.q,{vertical:!1,strokeDasharray:"3 3"}),(0,r.jsx)(ef.K,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,fontSize:10,interval:"preserveStartEnd"}),(0,r.jsx)(ex.B,{tickFormatter:e=>z(e),tickLine:!1,axisLine:!1,tickMargin:8,width:60,fontSize:10}),(0,r.jsx)(eh.u,{cursor:{fill:"hsl(var(--muted))",fillOpacity:.3},content:e=>{let{active:t,payload:a,label:s}=e;return(0,r.jsx)(m,{active:t,payload:a,label:s})}}),(0,r.jsx)(eg.u,{type:"linear",dataKey:"total",stroke:"none",fill:"var(--color-total)",fillOpacity:.4,name:"Total"}),(0,r.jsx)(eb.x,{type:"linear",dataKey:"total",stroke:"var(--color-total)",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"var(--color-total)",stroke:"hsl(var(--background))",strokeWidth:2},name:"Total"})]})})})})]}):(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(T.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)(G,{className:"h-full w-full"})})]})}var eE=a(31549),eR=a(53607),eP=a(64011),eT=a(55164),eD=a(40243);let eF=e=>{let t=[];for(let a=0;a<e;a++){let r=360/e*a%360;t.push("hsl(".concat(r,", 70%, 60%)"))}return t},eI=(e,t)=>{let a=new Map;return e.forEach(e=>{let r=e.category||t;a.set(r,(a.get(r)||0)+e.price)}),a};function eZ(e){let{expenses:t,defaultCategoryKey:a}=e,[l,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n(!0)},[]);let{pieData:i,barData:o,chartConfig:d}=(0,s.useMemo)(()=>{if(!l)return{pieData:[],barData:[],chartConfig:{}};let e=eI(t,a);if(0===e.size)return{pieData:[],barData:[],chartConfig:{}};let r=Array.from(e.values()).reduce((e,t)=>e+t,0),s=eF(e.size),n={},i=0,o=[],d=[];return e.forEach((e,t)=>{let a=s[i%s.length];n[t]={label:t,color:a},o.push({name:t,value:e,percentage:r>0?e/r*100:0,fill:a}),d.push({name:t,total:e,fill:a}),i++}),o.sort((e,t)=>t.value-e.value),d.sort((e,t)=>t.total-e.total),{pieData:o,barData:d,chartConfig:n}},[t,a,l]);return l?0===t.length||0===i.length?(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Pastel)"})}),(0,r.jsx)(T.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No hay datos de categor\xedas para mostrar."})})]}),(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Barras)"})}),(0,r.jsx)(T.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No hay datos de categor\xedas para mostrar."})})]})]}):(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Pastel)"})}),(0,r.jsx)(T.aY,{className:"min-h-[250px] sm:min-h-[350px] flex items-center justify-center",children:(0,r.jsx)(ek,{config:d,className:"w-full h-full max-h-[300px] sm:max-h-[350px]",children:(0,r.jsx)(em.h,{width:"100%",height:"100%",children:(0,r.jsxs)(eE.u,{children:[(0,r.jsx)(eh.u,{content:(0,r.jsx)(e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){var s;let e=a[0].payload;return(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium",children:"".concat(e.name)}),(0,r.jsx)("p",{children:"Total: ".concat(z(e.value))}),(0,r.jsx)("p",{children:"Porcentaje: ".concat(null===(s=e.percentage)||void 0===s?void 0:s.toFixed(1),"%")})]})}return null},{})}),(0,r.jsx)(ev.D,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{paddingTop:"10px"},iconSize:10}),(0,r.jsx)(eR.b,{data:i,cx:"50%",cy:"50%",labelLine:!1,outerRadius:"80%",dataKey:"value",nameKey:"name",children:i.map((e,t)=>(0,r.jsx)(eP.b,{fill:e.fill},"cell-".concat(t)))})]})})})})]}),(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"Gastos por Categor\xeda (Barras)"})}),(0,r.jsx)(T.aY,{className:"min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(ek,{config:d,className:"w-full h-full",children:(0,r.jsx)(em.h,{width:"100%",height:l&&window.innerWidth<640?250:350,children:(0,r.jsxs)(eT.v,{data:o,layout:"vertical",margin:{top:5,right:20,left:50,bottom:5},children:[(0,r.jsx)(ep.q,{strokeDasharray:"3 3",horizontal:!1}),(0,r.jsx)(ef.K,{type:"number",tickFormatter:e=>z(e),fontSize:10}),(0,r.jsx)(ex.B,{dataKey:"name",type:"category",width:80,tick:{fontSize:10,width:75,textAnchor:"end"},interval:0}),(0,r.jsx)(eh.u,{content:(0,r.jsx)(e=>{let{active:t,payload:a,label:s}=e;return t&&a&&a.length?(0,r.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 text-xs shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium",children:s}),(0,r.jsx)("p",{children:"Total: ".concat(z(a[0].value))})]}):null},{}),cursor:{fill:"hsl(var(--muted))",fillOpacity:.3}}),(0,r.jsx)(eD.$,{dataKey:"total",radius:[0,4,4,0],children:o.map((e,t)=>(0,r.jsx)(eP.b,{fill:e.fill},"cell-".concat(t)))})]})})})})]})]}):(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(T.aY,{className:"flex items-center justify-center min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(G,{className:"h-full w-full"})})]}),(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{children:(0,r.jsx)(G,{className:"h-6 w-3/4"})})}),(0,r.jsx)(T.aY,{className:"min-h-[250px] sm:min-h-[350px]",children:(0,r.jsx)(G,{className:"h-full w-full"})})]})]})}var eM=a(12854),eO=a(98455);let eG=eM.fC;eM.xz;let eV=eM.h_,eA=eM.x8,eL=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.aV,{ref:t,className:(0,F.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});eL.displayName=eM.aV.displayName;let eY=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(eV,{children:[(0,r.jsx)(eL,{}),(0,r.jsxs)(eM.VY,{ref:t,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[s,(0,r.jsxs)(eM.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(eO.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eY.displayName=eM.VY.displayName;let eW=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eW.displayName="DialogHeader";let eH=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};eH.displayName="DialogFooter";let eU=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.Dx,{ref:t,className:(0,F.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});eU.displayName=eM.Dx.displayName;let eK=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.dk,{ref:t,className:(0,F.cn)("text-sm text-muted-foreground",a),...s})});eK.displayName=eM.dk.displayName;let eJ=l.Ry({product:l.Z_().min(1,{message:"El nombre del producto no puede estar vac\xedo."}),price:l.oQ.number().positive({message:"El precio debe ser un n\xfamero positivo."}),category:l.Z_().optional()});function eB(e){let{expense:t,onSave:a,onCancel:l,categories:m,defaultCategoryKey:u}=e,[p,f]=(0,s.useState)(!1),[x,h]=(0,s.useState)(""),g=(0,i.cI)({resolver:(0,n.F)(eJ),defaultValues:{product:t.product.name,price:t.price,category:t.category===u?"":t.category}}),b=g.watch("price");(0,s.useEffect)(()=>{g.reset({product:t.product.name,price:t.price,category:t.category===u?"":t.category}),h(z(t.price))},[t,g,u]),(0,s.useEffect)(()=>{"number"!=typeof b||isNaN(b)?x!==z(0)&&h(z(0)):h(z(b))},[b,x]);let j=(e,t)=>{let a=_(e.target.value),r=z(isNaN(a)?0:a);x!==r&&h(r),t(isNaN(a)?0:a)},v=(e,t)=>{let a=z(isNaN(t)?0:t);x!==a&&h(a),e()};async function y(e){f(!0);try{var r;let s=(null===(r=e.category)||void 0===r?void 0:r.trim())||u,l={...t,product:{...t.product,name:e.product},price:e.price,category:s};await new Promise(e=>setTimeout(e,100)),a(l)}catch(e){console.error("Error al actualizar gasto:",e)}finally{f(!1)}}return(0,r.jsx)(eG,{open:!0,onOpenChange:e=>!e&&l(),children:(0,r.jsxs)(eY,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(eW,{children:[(0,r.jsx)(eU,{children:"Editar Gasto"}),(0,r.jsx)(eK,{children:'Modifica los detalles de tu gasto. Haz clic en "Guardar Cambios" cuando termines.'})]}),(0,r.jsx)(d.l0,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(y),className:"space-y-4 py-4",children:[(0,r.jsx)(d.Wi,{control:g.control,name:"product",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Producto"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"Ej: Caf\xe9",...t})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:g.control,name:"price",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Precio (COP)"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{type:"text",placeholder:z(0),...t,value:x,onChange:e=>j(e,t.onChange),onBlur:()=>v(t.onBlur,t.value),inputMode:"decimal"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:g.control,name:"category",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Categor\xeda (Opcional)"}),(0,r.jsx)(d.NI,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.I,{placeholder:"Ej: Comida",...t,list:"edit-category-suggestions",autoComplete:"off"}),(0,r.jsx)("datalist",{id:"edit-category-suggestions",children:m.map(e=>(0,r.jsx)("option",{value:e},e))})]})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsxs)(eH,{children:[(0,r.jsx)(eA,{asChild:!0,children:(0,r.jsx)(o.z,{type:"button",variant:"outline",onClick:l,children:"Cancelar"})}),(0,r.jsx)(o.z,{type:"submit",disabled:p,children:p?"Guardando...":"Guardar Cambios"})]})]})})]})})}var e$=a(73306),eX=a(57632),eq=a(4439),eQ=a(11163),e0=a(9008),e2=a.n(e0),e1=a(73293),e5=a(22213),e4=a(85265),e3=a(50882),e6=a(92847),e8=a(97870),e7=a(48095),e9=a(52091),te=a(45005),tt=a(65249),ta=a(76108),tr=a(57460),ts=a.n(tr),tl=a(93162),tn=a(76405),ti=a(54046),to=a(56169),td=a(81670);let tc=tn.fC;tn.ZA;let tm=tn.B4,tu=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(tn.xz,{ref:t,className:(0,F.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(tn.JO,{asChild:!0,children:(0,r.jsx)(ti.Z,{className:"h-4 w-4 opacity-50"})})]})});tu.displayName=tn.xz.displayName;let tp=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tn.u_,{ref:t,className:(0,F.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(to.Z,{className:"h-4 w-4"})})});tp.displayName=tn.u_.displayName;let tf=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tn.$G,{ref:t,className:(0,F.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(ti.Z,{className:"h-4 w-4"})})});tf.displayName=tn.$G.displayName;let tx=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...n}=e;return(0,r.jsx)(tn.h_,{children:(0,r.jsxs)(tn.VY,{ref:t,className:(0,F.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,r.jsx)(tp,{}),(0,r.jsx)(tn.l_,{className:(0,F.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(tf,{})]})})});tx.displayName=tn.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tn.__,{ref:t,className:(0,F.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=tn.__.displayName;let th=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(tn.ck,{ref:t,className:(0,F.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(tn.wU,{children:(0,r.jsx)(td.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(tn.eT,{children:s})]})});th.displayName=tn.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tn.Z0,{ref:t,className:(0,F.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=tn.Z0.displayName;var tg=a(95553),tb=a(37402),tj=a(8659),tv=a(52217);function ty(e){let{className:t,classNames:a,showOutsideDays:s=!0,...l}=e;return(0,r.jsx)(tv._W,{showOutsideDays:s,className:(0,F.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,F.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,F.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(tb.Z,{className:(0,F.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(tj.Z,{className:(0,F.cn)("h-4 w-4",t),...a})}},...l})}ty.displayName="Calendar";var tN=a(86419);let tw=tN.fC,tk=tN.xz,tS=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:l=4,...n}=e;return(0,r.jsx)(tN.h_,{children:(0,r.jsx)(tN.VY,{ref:t,align:s,sideOffset:l,className:(0,F.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});tS.displayName=tN.VY.displayName;var tC=a(75507),tz=a(88426),t_=a(89223),tE=a(12780);let tR=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:l=!0,...n}=e;return(0,r.jsx)(tE.f,{ref:t,decorative:l,orientation:s,className:(0,F.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...n})});tR.displayName=tE.f.displayName;let tP=eM.fC;eM.xz,eM.x8;let tT=eM.h_,tD=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.aV,{className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});tD.displayName=eM.aV.displayName;let tF=(0,ei.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),tI=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:l,...n}=e;return(0,r.jsxs)(tT,{children:[(0,r.jsx)(tD,{}),(0,r.jsxs)(eM.VY,{ref:t,className:(0,F.cn)(tF({side:a}),s),...n,children:[l,(0,r.jsxs)(eM.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(eO.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});tI.displayName=eM.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.Dx,{ref:t,className:(0,F.cn)("text-lg font-semibold text-foreground",a),...s})}).displayName=eM.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eM.dk,{ref:t,className:(0,F.cn)("text-sm text-muted-foreground",a),...s})}).displayName=eM.dk.displayName;var tZ=a(66908);let tM=tZ.zt,tO=tZ.fC,tG=tZ.xz,tV=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(tZ.VY,{ref:t,sideOffset:s,className:(0,F.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});tV.displayName=tZ.VY.displayName;let tA=s.createContext(null);function tL(){let e=s.useContext(tA);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let tY=s.forwardRef((e,t)=>{let{defaultOpen:a=!0,open:l,onOpenChange:n,className:i,style:o,children:d,...c}=e,m=function(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[u,p]=s.useState(!1),[f,x]=s.useState(a),h=null!=l?l:f,g=s.useCallback(e=>{let t="function"==typeof e?e(h):e;n?n(t):x(t),"undefined"!=typeof document&&(document.cookie="".concat("sidebar_state","=").concat(t,"; path=/; max-age=").concat(604800))},[n,h]),b=s.useCallback(()=>m?p(e=>!e):g(e=>!e),[m,g,p]);s.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[b]);let j=h?"expanded":"collapsed",v=s.useMemo(()=>({state:j,open:h,setOpen:g,isMobile:m,openMobile:u,setOpenMobile:p,toggleSidebar:b}),[j,h,g,m,u,p,b]);return(0,r.jsx)(tA.Provider,{value:v,children:(0,r.jsx)(tM,{delayDuration:0,children:(0,r.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...o},className:(0,F.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:t,...c,children:d})})})});tY.displayName="SidebarProvider";let tW=s.forwardRef((e,t)=>{let{side:a="left",variant:s="sidebar",collapsible:l="offcanvas",className:n,children:i,...o}=e,{isMobile:d,state:c,openMobile:m,setOpenMobile:u}=tL();return"none"===l?(0,r.jsx)("div",{className:(0,F.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:t,...o,children:i}):d?(0,r.jsx)(tP,{open:m,onOpenChange:u,...o,children:(0,r.jsx)(tI,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:a,children:(0,r.jsx)("div",{className:"flex h-full w-full flex-col",children:i})})}):(0,r.jsxs)("div",{ref:t,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":"collapsed"===c?l:"","data-variant":s,"data-side":a,children:[(0,r.jsx)("div",{className:(0,F.cn)("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===s||"inset"===s?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,r.jsx)("div",{className:(0,F.cn)("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===a?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===s||"inset"===s?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:(0,r.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});tW.displayName="Sidebar";let tH=s.forwardRef((e,t)=>{let{className:a,onClick:s,...l}=e,{toggleSidebar:n}=tL();return(0,r.jsxs)(o.z,{ref:t,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,F.cn)("h-7 w-7",a),onClick:e=>{null==s||s(e),n()},...l,children:[(0,r.jsx)(t_.Z,{}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});tH.displayName="SidebarTrigger",s.forwardRef((e,t)=>{let{className:a,...s}=e,{toggleSidebar:l}=tL();return(0,r.jsx)("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:l,title:"Toggle Sidebar",className:(0,F.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",a),...s})}).displayName="SidebarRail";let tU=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("main",{ref:t,className:(0,F.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...s})});tU.displayName="SidebarInset",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(c.I,{ref:t,"data-sidebar":"input",className:(0,F.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",a),...s})}).displayName="SidebarInput";let tK=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"header",className:(0,F.cn)("flex flex-col gap-2 p-2",a),...s})});tK.displayName="SidebarHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"footer",className:(0,F.cn)("flex flex-col gap-2 p-2",a),...s})}).displayName="SidebarFooter",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tR,{ref:t,"data-sidebar":"separator",className:(0,F.cn)("mx-2 w-auto bg-sidebar-border",a),...s})}).displayName="SidebarSeparator";let tJ=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"content",className:(0,F.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...s})});tJ.displayName="SidebarContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"group",className:(0,F.cn)("relative flex w-full min-w-0 flex-col p-2",a),...s})}).displayName="SidebarGroup",s.forwardRef((e,t)=>{let{className:a,asChild:s=!1,...l}=e,n=s?tz.g7:"div";return(0,r.jsx)(n,{ref:t,"data-sidebar":"group-label",className:(0,F.cn)("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...l})}).displayName="SidebarGroupLabel",s.forwardRef((e,t)=>{let{className:a,asChild:s=!1,...l}=e,n=s?tz.g7:"button";return(0,r.jsx)(n,{ref:t,"data-sidebar":"group-action",className:(0,F.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...l})}).displayName="SidebarGroupAction",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"group-content",className:(0,F.cn)("w-full text-sm",a),...s})}).displayName="SidebarGroupContent";let tB=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("ul",{ref:t,"data-sidebar":"menu",className:(0,F.cn)("flex w-full min-w-0 flex-col gap-1",a),...s})});tB.displayName="SidebarMenu";let t$=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("li",{ref:t,"data-sidebar":"menu-item",className:(0,F.cn)("group/menu-item relative",a),...s})});t$.displayName="SidebarMenuItem";let tX=(0,ei.j)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),tq=s.forwardRef((e,t)=>{let{asChild:a=!1,isActive:s=!1,variant:l="default",size:n="default",tooltip:i,className:o,...d}=e,c=a?tz.g7:"button",{isMobile:m,state:u}=tL(),p=(0,r.jsx)(c,{ref:t,"data-sidebar":"menu-button","data-size":n,"data-active":s,className:(0,F.cn)(tX({variant:l,size:n}),o),...d});return i?("string"==typeof i&&(i={children:i}),(0,r.jsxs)(tO,{children:[(0,r.jsx)(tG,{asChild:!0,children:p}),(0,r.jsx)(tV,{side:"right",align:"center",hidden:"collapsed"!==u||m,...i})]})):p});tq.displayName="SidebarMenuButton",s.forwardRef((e,t)=>{let{className:a,asChild:s=!1,showOnHover:l=!1,...n}=e,i=s?tz.g7:"button";return(0,r.jsx)(i,{ref:t,"data-sidebar":"menu-action",className:(0,F.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",l&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...n})}).displayName="SidebarMenuAction",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,"data-sidebar":"menu-badge",className:(0,F.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...s})}).displayName="SidebarMenuBadge",s.forwardRef((e,t)=>{let{className:a,showIcon:l=!1,...n}=e,i=s.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,r.jsxs)("div",{ref:t,"data-sidebar":"menu-skeleton",className:(0,F.cn)("rounded-md h-8 flex gap-2 px-2 items-center",a),...n,children:[l&&(0,r.jsx)(G,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,r.jsx)(G,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})}).displayName="SidebarMenuSkeleton",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("ul",{ref:t,"data-sidebar":"menu-sub",className:(0,F.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...s})}).displayName="SidebarMenuSub",s.forwardRef((e,t)=>{let{...a}=e;return(0,r.jsx)("li",{ref:t,...a})}).displayName="SidebarMenuSubItem",s.forwardRef((e,t)=>{let{asChild:a=!1,size:s="md",isActive:l,className:n,...i}=e,o=a?tz.g7:"a";return(0,r.jsx)(o,{ref:t,"data-sidebar":"menu-sub-button","data-size":s,"data-active":l,className:(0,F.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===s&&"text-xs","md"===s&&"text-sm","group-data-[collapsible=icon]:hidden",n),...i})}).displayName="SidebarMenuSubButton";let tQ="no definido";function t0(){let e,t,a,l,n,i;let{toast:d}=(0,m.pm)(),{currentUser:c,setCurrentUser:p,loadingAuth:f}=(0,eq.a)(),x=(0,eQ.useRouter)(),[h,g]=(0,e$.Z)("expenses",[]),[k,S]=(0,e$.Z)("categories",[tQ]),[C,_]=(0,e$.Z)("lastSyncTimestamp",null),[E,R]=(0,e$.Z)("deletedServerExpenseIds",[]),[D,I]=(0,s.useState)(!1),Z=(0,s.useRef)(null),M=(0,s.useRef)(null),[O,A]=(0,s.useState)(null),[L,Y]=(0,s.useState)(!1),[W,H]=(0,s.useState)("all"),[U,K]=(0,s.useState)("all"),[J,B]=(0,s.useState)(null),[$,X]=(0,s.useState)(null),[q,Q]=(0,s.useState)("allTime"),[ee,et]=(0,s.useState)("control"),{isMobile:ea,setOpen:er,setOpenMobile:es}=tL();(0,s.useEffect)(()=>{I(!0)},[]),(0,s.useEffect)(()=>{D&&!k.includes(tQ)&&S(e=>[...e,tQ].sort())},[k,S,D]),(0,s.useEffect)(()=>{if(!D)return;let e=new Date,t=null,a=null;if("allTime"===q)t=null,a=null;else if("7days"===q)t=(0,j.b)((0,tC.k)(e,6)),a=(0,b.i)(e);else if("30days"===q)t=(0,j.b)((0,tC.k)(e,29)),a=(0,b.i)(e);else if("90days"===q)t=(0,j.b)((0,tC.k)(e,89)),a=(0,b.i)(e);else if("custom"===q)return;B(t),X(a)},[q,D]);let el=(0,s.useMemo)(()=>D?["all",...Array.from(new Set(h.map(e=>e.product.name))).sort()]:["all"],[h,D]),en=(0,s.useMemo)(()=>D?["all",...Array.from(new Set(h.map(e=>e.category||tQ))).sort()]:["all"],[h,D]),ei=(0,s.useMemo)(()=>D?h.filter(e=>{let t="all"===W||e.product.name===W,a="all"===U||(e.category||tQ)===U,r=w(e.timestamp);if(!r||!(0,u.J)(r))return!1;let s=!0,l=J?(0,j.b)(J):null,n=$?(0,b.i)($):null;return l&&n?s=(0,v._)(r,{start:l,end:n}):l?s=r>=l:n&&(s=r<=n),t&&a&&s}):[],[h,W,U,J,$,D]),eo=(0,s.useMemo)(()=>D?ei.reduce((e,t)=>e+t.price,0):0,[ei,D]),ed=(e,t)=>{e(t),Q("custom")},em=async()=>{let e=localStorage.getItem("accessToken");if(e)try{await fetch("https://back.presupuesto.peryloth.com/api/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})}catch(e){console.error("Error calling logout endpoint:",e)}p(null),localStorage.removeItem("accessToken"),localStorage.removeItem("lastSyncTimestamp"),localStorage.removeItem("deletedServerExpenseIds"),d({title:"Sesi\xf3n Cerrada",description:"Has cerrado sesi\xf3n exitosamente."}),x.push("/login")},eu=async()=>{if(!D||!c){d({title:"Sincronizaci\xf3n Fallida",description:"Debes iniciar sesi\xf3n para sincronizar.",variant:"destructive"});return}Y(!0);let e=localStorage.getItem("accessToken");if(!e){d({title:"Sincronizaci\xf3n Fallida",description:"Token no encontrado. Inicia sesi\xf3n de nuevo.",variant:"destructive"}),Y(!1);return}try{let r=h.filter(e=>!/^\d+$/.test(e.id)).map(e=>{let t=e.timestamp instanceof Date?e.timestamp:new Date(e.timestamp),a=(0,u.J)(t)?(0,y.WU)(t,"yyyy-MM-dd HH:mm:ss"):new Date().toISOString().slice(0,19).replace("T"," ");return{local_id:e.id,productName:e.product.name,price:e.price,category:e.category||tQ,timestamp:a}}),s=h.filter(e=>/^\d+$/.test(e.id)).map(e=>{let t=e.timestamp instanceof Date?e.timestamp:new Date(e.timestamp),a=(0,u.J)(t)?(0,y.WU)(t,"yyyy-MM-dd HH:mm:ss"):new Date().toISOString().slice(0,19).replace("T"," ");return{id:e.id,productName:e.product.name,price:e.price,category:e.category||tQ,timestamp:a}}),l={created:r,updated:s,deleted_ids:E};if(l.created.length>0||l.updated.length>0||l.deleted_ids.length>0){var t,a;let r=await fetch("https://back.presupuesto.peryloth.com/api/sync/expenses",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)});if(!r.ok){let e=await r.json().catch(()=>({message:"Error al enviar cambios (PUSH): ".concat(r.status)}));throw Error(e.message||"Error ".concat(r.status,": ").concat(JSON.stringify(e)))}let s=await r.json(),n=[...h];s.created_map&&s.created_map.forEach(e=>{n=n.map(t=>t.id===e.local_id?{...t,id:String(e.server_id)}:t)}),g(n),d({title:"Cambios Locales Sincronizados (PUSH)",description:"".concat((null===(t=s.created_map)||void 0===t?void 0:t.length)||0," creados, ").concat((null===(a=s.updated_results)||void 0===a?void 0:a.filter(e=>"success"===e.status).length)||0," actualizados, ").concat(s.deleted_count||0," eliminados en el servidor.")}),R([])}else d({title:"Sin cambios locales para enviar (PUSH)."})}catch(e){console.error("Error en la fase PUSH de sincronizaci\xf3n:",e),d({title:"Error al Enviar Cambios (PUSH)",description:e.message||"No se pudo enviar los cambios locales.",variant:"destructive"}),Y(!1);return}try{let t=await fetch("https://back.presupuesto.peryloth.com/api/sync/get-all-server-data",{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(!t.ok){let e=await t.json().catch(()=>({message:"Error del servidor al obtener datos (PULL): ".concat(t.status)}));throw Error(e.message||"Error ".concat(t.status))}let a=await t.json(),r=a.expenses.filter(e=>!e.deleted_at).map(e=>{let t=parseFloat(e.price),a=w(e.timestamp);return!isNaN(t)&&a&&(0,u.J)(a)&&e.productName?{id:String(e.id),product:{name:e.productName,value:0,color:""},price:t,category:e.category||tQ,timestamp:a}:(console.warn("Gasto inv\xe1lido recibido del servidor (PULL):",e),null)}).filter(e=>null!==e).sort((e,t)=>w(t.timestamp).getTime()-w(e.timestamp).getTime());g(r);let s=a.categories.map(e=>e.name),l=Array.from(new Set([tQ,...s])).sort();S(l),_(a.server_timestamp),d({title:"Sincronizaci\xf3n Completada (Pull All)",description:"".concat(r.length," gastos y ").concat(l.length," categor\xedas actualizadas desde el servidor.")})}catch(e){console.error("Error en la fase PULL de sincronizaci\xf3n (Get All):",e),d({title:"Error al Obtener Datos Completos (Pull All)",description:e.message||"No se pudo obtener datos del servidor.",variant:"destructive"})}finally{Y(!1)}};if(D){let r="all"!==W,s="all"!==U,n="allTime"===q&&!J&&!$;r&&!s&&n?(e="product",t=W,a=W,l=e=>{h.filter(t=>t.product.name===e).forEach(e=>{/^\d+$/.test(e.id)&&R(t=>t.includes(e.id)?t:[...t,e.id])}),g(t=>t.filter(t=>t.product.name!==e)),d({title:"Producto Eliminado",description:'Todas las entradas para el producto "'.concat(e,'" han sido eliminadas. Se sincronizar\xe1 la eliminaci\xf3n con el servidor.')})}):s&&!r&&n&&(e="category",t=U,a=U,l=e=>{if(e===tQ){d({title:"Acci\xf3n no permitida",description:'La categor\xeda "'.concat(tQ,'" no puede ser eliminada, pero sus gastos s\xed.'),variant:"destructive"});return}h.filter(t=>t.category===e).forEach(e=>{/^\d+$/.test(e.id)&&R(t=>t.includes(e.id)?t:[...t,e.id])}),g(t=>t.filter(t=>t.category!==e)),k.includes(e)&&S(t=>t.filter(t=>t!==e)),d({title:"Categor\xeda Eliminada",description:'Todas las entradas para la categor\xeda "'.concat(e,'" han sido eliminadas y la categor\xeda removida. Se sincronizar\xe1 la eliminaci\xf3n.')})})}let{minExpenseDateOverall:ep,maxExpenseDateOverall:ef}=(0,s.useMemo)(()=>{if(!D||0===h.length){let e=new Date;return{minExpenseDateOverall:(0,j.b)((0,tC.k)(e,6)),maxExpenseDateOverall:(0,b.i)(e)}}let e=null,t=null;h.forEach(a=>{let r=w(a.timestamp);r&&(0,u.J)(r)&&((null===e||r<e)&&(e=r),(null===t||r>t)&&(t=r))});let a=(0,j.b)((0,tC.k)(new Date,6)),r=(0,b.i)(new Date);return{minExpenseDateOverall:e?(0,j.b)(e):a,maxExpenseDateOverall:t?(0,b.i)(t):r}},[h,D]),ex=null!=J?J:ep,eh=null!=$?$:ef;if(f&&D)return(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center",children:[(0,r.jsx)(G,{className:"h-16 w-16 rounded-full animate-spin"}),(0,r.jsx)("p",{className:"ml-4 text-lg",children:"Cargando..."})]});let eg={control:"Control de Gastos",reporting:"Reporter\xeda",data:"Exportar/Importar Data",profile:"Perfil y Sincronizaci\xf3n"},eb=e=>{et(e),ea?es(!1):er(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e2(),{children:[(0,r.jsxs)("title",{children:[eg[ee]," - Control de Gastos"]}),(0,r.jsx)("meta",{name:"description",content:"Registra y analiza tus gastos f\xe1cilmente."})]}),(0,r.jsxs)(tW,{children:[(0,r.jsx)(tK,{className:"p-4",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-sidebar-foreground",children:"Men\xfa Principal"})}),(0,r.jsx)(tJ,{children:(0,r.jsxs)(tB,{children:[(0,r.jsx)(t$,{children:(0,r.jsxs)(tq,{onClick:()=>eb("control"),isActive:"control"===ee,tooltip:"Control de Gastos",children:[(0,r.jsx)(e1.Z,{}),(0,r.jsx)("span",{children:"Control de Gastos"})]})}),(0,r.jsx)(t$,{children:(0,r.jsxs)(tq,{onClick:()=>eb("reporting"),isActive:"reporting"===ee,tooltip:"Reporter\xeda",children:[(0,r.jsx)(e5.Z,{}),(0,r.jsx)("span",{children:"Reporter\xeda"})]})}),(0,r.jsx)(t$,{children:(0,r.jsxs)(tq,{onClick:()=>eb("data"),isActive:"data"===ee,tooltip:"Exportar/Importar Data",children:[(0,r.jsx)(e4.Z,{}),(0,r.jsx)("span",{children:"Exportar/Importar"})]})}),(0,r.jsx)(t$,{children:(0,r.jsxs)(tq,{onClick:()=>eb("profile"),isActive:"profile"===ee,tooltip:"Perfil y Sincronizaci\xf3n",children:[(0,r.jsx)(e3.Z,{}),(0,r.jsx)("span",{children:"Perfil"})]})})]})})]}),(0,r.jsxs)(tU,{children:[(0,r.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6 sm:py-4",children:[(0,r.jsxs)(tH,{className:"sm:hidden",children:[" ",(0,r.jsx)(e6.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"})]}),(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-semibold text-foreground grow",children:eg[ee]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground hidden md:block",children:"control"===ee&&"Registra y analiza tus gastos f\xe1cilmente."})]}),(0,r.jsxs)("main",{className:"flex flex-col flex-1 gap-4 p-4 sm:px-6 sm:py-0 md:gap-8",children:["control"===ee&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-1",children:(0,r.jsx)(P,{onAddExpense:e=>{var t;let a=(null===(t=e.category)||void 0===t?void 0:t.trim())?e.category.trim():tQ,r={...e,category:a,id:(0,eX.Z)(),timestamp:new Date};a===tQ||k.includes(a)||S(e=>[...e,a].sort()),g(e=>[...e,r].sort((e,t)=>{var a,r,s,l;let n=null!==(s=null===(a=w(e.timestamp))||void 0===a?void 0:a.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(t.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),M.current&&M.current.focus()},categories:k.filter(e=>e!==tQ),defaultCategoryKey:tQ,productInputRef:M})}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(V,{expenses:h})})]}),"reporting"===ee&&(0,r.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,r.jsxs)(T.Zb,{className:"mb-4 md:mb-6",children:[(0,r.jsx)(T.Ol,{children:(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"Filtros de Reporter\xeda"})}),(0,r.jsxs)(T.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(tg._,{htmlFor:"product-filter-select",className:"text-xs sm:text-sm",children:"Filtrar por Producto:"}),(0,r.jsxs)(tc,{onValueChange:H,value:W,disabled:!D,children:[(0,r.jsx)(tu,{id:"product-filter-select",className:"w-full mt-1",children:(0,r.jsx)(tm,{placeholder:"Seleccionar Producto",children:"all"===W?"Todos los Productos":W})}),(0,r.jsx)(tx,{children:el.map(e=>(0,r.jsx)(th,{value:e,children:"all"===e?"Todos los Productos":e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(tg._,{htmlFor:"category-filter-select",className:"text-xs sm:text-sm",children:"Filtrar por Categor\xeda:"}),(0,r.jsxs)(tc,{onValueChange:K,value:U,disabled:!D,children:[(0,r.jsx)(tu,{id:"category-filter-select",className:"w-full mt-1",children:(0,r.jsx)(tm,{placeholder:"Seleccionar Categor\xeda",children:"all"===U?"Todas las Categor\xedas":U})}),(0,r.jsx)(tx,{children:en.map(e=>(0,r.jsx)(th,{value:e,children:"all"===e?"Todas las Categor\xedas":e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 items-end",children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsx)(tg._,{htmlFor:"quick-range-select",className:"text-xs sm:text-sm",children:"Rango R\xe1pido:"}),(0,r.jsxs)(tc,{onValueChange:e=>Q(e),value:q,disabled:!D,children:[(0,r.jsx)(tu,{id:"quick-range-select",className:"w-full mt-1",children:(0,r.jsx)(tm,{placeholder:"Seleccionar Rango"})}),(0,r.jsxs)(tx,{children:[(0,r.jsx)(th,{value:"allTime",children:"Todo el tiempo"}),(0,r.jsx)(th,{value:"7days",children:"\xdaltimos 7 d\xedas"}),(0,r.jsx)(th,{value:"30days",children:"\xdaltimos 30 d\xedas"}),(0,r.jsx)(th,{value:"90days",children:"\xdaltimos 90 d\xedas"}),(0,r.jsx)(th,{value:"custom",children:"Personalizado"})]})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(tg._,{htmlFor:"start-date-filter",className:"text-xs sm:text-sm",children:"Fecha Desde:"}),(0,r.jsxs)(tw,{children:[(0,r.jsx)(tk,{asChild:!0,children:(0,r.jsxs)(o.z,{id:"start-date-filter",variant:"outline",className:(0,F.cn)("w-full justify-start text-left font-normal mt-1",!J&&"text-muted-foreground"),disabled:!D,children:[(0,r.jsx)(e8.Z,{className:"mr-2 h-4 w-4"}),J?(0,y.WU)(J,"PPP",{locale:N.es}):(0,r.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,r.jsx)(tS,{className:"w-auto p-0",children:(0,r.jsx)(ty,{mode:"single",selected:J||void 0,onSelect:e=>ed(B,e||null),initialFocus:!0})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(tg._,{htmlFor:"end-date-filter",className:"text-xs sm:text-sm",children:"Fecha Hasta:"}),(0,r.jsxs)(tw,{children:[(0,r.jsx)(tk,{asChild:!0,children:(0,r.jsxs)(o.z,{id:"end-date-filter",variant:"outline",className:(0,F.cn)("w-full justify-start text-left font-normal mt-1",!$&&"text-muted-foreground"),disabled:!D,children:[(0,r.jsx)(e8.Z,{className:"mr-2 h-4 w-4"}),$?(0,y.WU)($,"PPP",{locale:N.es}):(0,r.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,r.jsx)(tS,{className:"w-auto p-0",children:(0,r.jsx)(ty,{mode:"single",selected:$||void 0,onSelect:e=>ed(X,e||null),disabled:e=>!!J&&e<J,initialFocus:!0})})]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(o.z,{onClick:()=>{H("all"),K("all"),Q("allTime")},variant:"outline",className:"w-full sm:w-auto mt-2 sm:mt-0",disabled:!D,children:[(0,r.jsx)(e7.Z,{className:"mr-2 h-4 w-4"})," Limpiar Filtros"]})})]})]}),(0,r.jsx)(e_,{expenses:ei,startDate:ex,endDate:eh}),(0,r.jsx)(eZ,{expenses:ei,defaultCategoryKey:tQ}),(0,r.jsxs)(T.Zb,{children:[(0,r.jsxs)(T.Ol,{children:[(0,r.jsx)(T.ll,{className:"text-lg sm:text-xl",children:"all"!==W&&"all"!==U?"Historial de ".concat(W," (").concat(U,")"):"all"!==W?"Historial de ".concat(W):"all"!==U?"Historial de ".concat(U):"Historial Completo de Gastos"}),(0,r.jsx)(T.SZ,{children:(n="",n="all"!==W&&"all"!==U?"Gastos para ".concat(W," (").concat(U,")"):"all"!==W?"Gastos para el producto ".concat(W):"all"!==U?"Gastos para la categor\xeda ".concat(U):"Todos los gastos registrados",i="",i=J&&$?" entre ".concat((0,y.WU)(J,"PPP",{locale:N.es})," y ").concat((0,y.WU)($,"PPP",{locale:N.es})):J?" desde ".concat((0,y.WU)(J,"PPP",{locale:N.es})):$?" hasta ".concat((0,y.WU)($,"PPP",{locale:N.es})):" (todo el tiempo)","".concat(n).concat(i,". Total: ").concat(z(eo)))})]}),(0,r.jsxs)(T.aY,{className:"px-0 sm:px-6 sm:pb-6",children:[" ",D?(0,r.jsx)(ec,{expenses:ei,onDeleteExpense:e=>{let t=h.find(t=>t.id===e);t&&/^\d+$/.test(t.id)&&R(e=>e.includes(t.id)?e:[...e,t.id]),g(t=>t.filter(t=>t.id!==e))},onEditExpense:e=>{A(e)},groupName:t,onDeleteGroup:l,groupTypeLabel:e,groupDisplayName:a,defaultCategoryKey:tQ}):(0,r.jsx)(G,{className:"h-64 w-full"})]})]})]}),"data"===ee&&(0,r.jsxs)(T.Zb,{children:[(0,r.jsxs)(T.Ol,{children:[(0,r.jsx)(T.ll,{children:"Exportar/Importar Data (CSV)"}),(0,r.jsx)(T.SZ,{children:"Exporta tus gastos a un archivo CSV o importa desde uno existente."})]}),(0,r.jsxs)(T.aY,{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,r.jsx)("input",{type:"file",ref:Z,onChange:e=>{if(!D||!e.target.files||0===e.target.files.length)return;let t=e.target.files[0],a=new FileReader;a.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if("string"==typeof a)try{let e=ts().parse(a,{header:!0,skipEmptyLines:!0}),t=[],r=new Set(k),s=0;e.errors.length>0&&(e.errors.forEach(e=>console.error("CSV Parsing Error:",e)),d({title:"Error de Formato CSV",description:"Se encontraron ".concat(e.errors.length," errores al leer el archivo. Verifica el formato."),variant:"destructive"})),e.data.forEach((e,a)=>{var l,n,i,o;let d=null===(l=e.Producto)||void 0===l?void 0:l.trim(),c=null===(n=e.Precio)||void 0===n?void 0:n.trim(),m=(null===(i=e.Categoria)||void 0===i?void 0:i.trim())||tQ,p=null===(o=e.Timestamp)||void 0===o?void 0:o.trim(),f=parseFloat(c),x=w(p);if(!x&&"string"==typeof p){let e=p.match(/(\d{2})\/(\d{2})\/(\d{4})\s(\d{2}):(\d{2}):(\d{2})/),t=p.match(/(\d{2})\/(\d{2})\/(\d{4})\s(\d{2}):(\d{2})/),r=e||t;if(r){let t=r[1],s=r[2],l=r[3],n=r[4],i=r[5],o=e?r[6]:"00",d="".concat(l,"-").concat(s,"-").concat(t,"T").concat(n,":").concat(i,":").concat(o);x=w(d),(0,u.J)(x)||(console.warn("Fila ".concat(a+2,": Fall\xf3 el intento de parseo de fecha custom: ").concat(p," -> ").concat(d)),x=null)}else console.warn("Fila ".concat(a+2,": Formato de fecha no reconocido al importar: ").concat(p))}if(!d||isNaN(f)||f<=0||!x||!(0,u.J)(x)){console.warn("Fila ".concat(a+2," omitida: Datos inv\xe1lidos (Producto: ").concat(d,", Precio: ").concat(c,", Timestamp: ").concat(p,", Fecha Parseada: ").concat(x,")")),s++;return}let h={id:e.ID_Frontend||(0,eX.Z)(),product:{name:d,value:0,color:""},price:f,category:m,timestamp:x};t.push(h),m!==tQ&&m&&r.add(m)}),t.length>0&&(g(e=>[...e,...t].sort((e,t)=>{var a,r,s,l;let n=null!==(s=null===(a=w(e.timestamp))||void 0===a?void 0:a.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(t.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),S(Array.from(r).sort())),d({title:"Importaci\xf3n Completa",description:"".concat(t.length," gastos importados. ").concat(s>0?"".concat(s," filas omitidas por datos inv\xe1lidos."):"")})}catch(e){console.error("Error al importar CSV:",e),d({title:"Error de Importaci\xf3n",description:"No se pudo procesar el archivo CSV.",variant:"destructive"})}finally{Z.current&&(Z.current.value="")}},a.onerror=e=>{console.error("Error al leer archivo:",e),d({title:"Error de Lectura",description:"No se pudo leer el archivo seleccionado.",variant:"destructive"}),Z.current&&(Z.current.value="")},a.readAsText(t)},accept:".csv",style:{display:"none"},id:"import-csv-input"}),D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.z,{onClick:()=>{if(!D)return;let e=h.map(e=>({ID_Frontend:e.id,Producto:e.product.name,Precio:e.price,Categoria:e.category,Timestamp:e.timestamp instanceof Date?e.timestamp.toISOString():new Date(e.timestamp).toISOString()})),t=new Blob([ts().unparse(e,{header:!0})],{type:"text/csv;charset=utf-8;"});(0,tl.saveAs)(t,"gastos.csv"),d({title:"Exportaci\xf3n Completa",description:"Los datos de gastos se han exportado a gastos.csv."})},variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(e9.Z,{className:"mr-2 h-4 w-4"})," Exportar a CSV"]}),(0,r.jsxs)(o.z,{onClick:()=>{D&&Z.current&&Z.current.click()},variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(te.Z,{className:"mr-2 h-4 w-4"})," Importar desde CSV"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{className:"h-10 w-full sm:w-[150px]"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[170px]"})]})]})]}),"profile"===ee&&(0,r.jsxs)(T.Zb,{children:[(0,r.jsx)(T.Ol,{children:(0,r.jsxs)(T.ll,{className:"flex items-center",children:[(0,r.jsx)(e3.Z,{className:"mr-2 h-6 w-6"})," Perfil y Sincronizaci\xf3n"]})}),(0,r.jsx)(T.aY,{className:"space-y-4",children:D&&c?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("p",{className:"text-lg",children:["\xa1Bienvenido de nuevo, ",(0,r.jsx)("span",{className:"font-semibold",children:c.name||c.email}),"!"]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Email: ",c.email]}),(0,r.jsx)(o.z,{onClick:eu,className:"w-full sm:w-auto",disabled:L,children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tt.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Sincronizando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tt.Z,{className:"mr-2 h-4 w-4"})," Sincronizar Datos"]})}),(0,r.jsxs)(o.z,{onClick:em,variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(ta.Z,{className:"mr-2 h-4 w-4"})," Cerrar Sesi\xf3n"]})]}):D?(0,r.jsxs)("div",{className:"space-y-3 text-center sm:text-left",children:[(0,r.jsx)("p",{children:"Inicia sesi\xf3n o reg\xedstrate para sincronizar tus datos entre dispositivos."}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Puedes seguir usando la aplicaci\xf3n localmente sin una cuenta."}),(0,r.jsxs)(o.z,{onClick:()=>x.push("/login"),className:"w-full sm:w-auto",children:[(0,r.jsx)(e3.Z,{className:"mr-2 h-4 w-4"})," Ir a Iniciar Sesi\xf3n / Registrarse"]})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(G,{className:"h-8 w-3/4"}),(0,r.jsx)(G,{className:"h-6 w-1/2"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[220px]"}),(0,r.jsx)(G,{className:"h-10 w-full sm:w-[150px]"})]})})]})]})]}),O&&D&&(0,r.jsx)(eB,{expense:O,onSave:e=>{var t;let a=(null===(t=e.category)||void 0===t?void 0:t.trim())?e.category.trim():tQ,r={...e,category:a};g(e=>e.map(e=>e.id===r.id?r:e).sort((e,t)=>{var a,r,s,l;let n=null!==(s=null===(a=w(e.timestamp))||void 0===a?void 0:a.getTime())&&void 0!==s?s:0;return(null!==(l=null===(r=w(t.timestamp))||void 0===r?void 0:r.getTime())&&void 0!==l?l:0)-n})),a===tQ||k.includes(a)||S(e=>[...e,a].sort()),A(null),d({title:"Gasto Actualizado",description:'El gasto "'.concat(r.product.name,'" ha sido actualizado.')})},onCancel:()=>{A(null)},categories:k.filter(e=>e!==tQ),defaultCategoryKey:tQ})]})}function t2(){return(0,r.jsx)(tY,{children:(0,r.jsx)(t0,{})})}},28728:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var r=a(85893),s=a(67294),l=a(88426),n=a(12003),i=a(53776);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,m=d?l.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},47903:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var r=a(85893),s=a(67294),l=a(53776);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},96164:function(e,t,a){"use strict";a.d(t,{NI:function(){return h},Wi:function(){return m},l0:function(){return d},lX:function(){return x},xJ:function(){return f},zG:function(){return g}});var r=a(85893),s=a(67294),l=a(88426),n=a(87536),i=a(53776),o=a(95553);let d=n.RV,c=s.createContext({}),m=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(n.Qr,{...t})})},u=()=>{let e=s.useContext(c),t=s.useContext(p),{getFieldState:a,formState:r}=(0,n.Gc)(),l=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},p=s.createContext({}),f=s.forwardRef((e,t)=>{let{className:a,...l}=e,n=s.useId();return(0,r.jsx)(p.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...l})})});f.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:l,formItemId:n}=u();return(0,r.jsx)(o._,{ref:t,className:(0,i.cn)(l&&"text-destructive",a),htmlFor:n,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=u();return(0,r.jsx)(l.g7,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...a})});h.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:l}=u();return(0,r.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let g=s.forwardRef((e,t)=>{var a;let{className:s,children:l,...n}=e,{error:o,formMessageId:d}=u(),c=o?String(null!==(a=null==o?void 0:o.message)&&void 0!==a?a:""):l;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});g.displayName="FormMessage"},85451:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(85893),s=a(67294),l=a(53776);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},95553:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var r=a(85893),s=a(67294),l=a(49102),n=a(12003),i=a(53776);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.f,{ref:t,className:(0,i.cn)(o(),a),...s})});d.displayName=l.f.displayName}},function(e){e.O(0,[487,729,888,774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);